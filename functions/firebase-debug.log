[debug] [2024-01-02T10:26:32.310Z] ----------------------------------------------------------------------
[debug] [2024-01-02T10:26:32.315Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2024-01-02T10:26:32.316Z] CLI Version:   12.9.1
[debug] [2024-01-02T10:26:32.316Z] Platform:      win32
[debug] [2024-01-02T10:26:32.317Z] Node Version:  v21.3.0
[debug] [2024-01-02T10:26:32.317Z] Time:          Tue Jan 02 2024 10:26:32 GMT+0000 (Greenwich Mean Time)
[debug] [2024-01-02T10:26:32.318Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-01-02T10:26:32.452Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-01-02T10:26:32.453Z] > authorizing via signed-in user (kshjssjjs@gmail.com)
[debug] [2024-01-02T10:26:32.453Z] [iam] checking project bookfreak-954da for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-01-02T10:26:32.457Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions [none]
[debug] [2024-01-02T10:26:32.458Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T10:26:32.458Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-01-02T10:26:33.369Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions 200
[debug] [2024-01-02T10:26:33.369Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-01-02T10:26:33.370Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/bookfreak-954da/serviceAccounts/bookfreak-954da@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-01-02T10:26:33.370Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/bookfreak-954da/serviceAccounts/bookfreak-954da@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-01-02T10:26:34.158Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/bookfreak-954da/serviceAccounts/bookfreak-954da@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2024-01-02T10:26:34.159Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/bookfreak-954da/serviceAccounts/bookfreak-954da@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'bookfreak-954da'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] +  functions: Finished running predeploy script. 
[debug] [2024-01-02T10:26:41.944Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da [none]
[debug] [2024-01-02T10:26:42.231Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da 200
[debug] [2024-01-02T10:26:42.232Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da {"projectId":"bookfreak-954da","projectNumber":"389109624627","displayName":"BookFreak","name":"projects/bookfreak-954da","resources":{"hostingSite":"bookfreak-954da","realtimeDatabaseInstance":"bookfreak-954da-default-rtdb","storageBucket":"bookfreak-954da.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_ffccf81b-0921-4365-a036-797cab7a6c35"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-01-02T10:26:42.236Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudfunctions.googleapis.com [none]
[debug] [2024-01-02T10:26:42.236Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T10:26:42.238Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/runtimeconfig.googleapis.com [none]
[debug] [2024-01-02T10:26:42.238Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T10:26:42.240Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudbuild.googleapis.com [none]
[debug] [2024-01-02T10:26:42.240Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudbuild.googleapis.com x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T10:26:42.242Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/artifactregistry.googleapis.com [none]
[debug] [2024-01-02T10:26:42.242Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/artifactregistry.googleapis.com x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T10:26:43.193Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/artifactregistry.googleapis.com 200
[debug] [2024-01-02T10:26:43.194Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-01-02T10:26:43.196Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudbuild.googleapis.com 200
[debug] [2024-01-02T10:26:43.196Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-01-02T10:26:43.221Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudfunctions.googleapis.com 200
[debug] [2024-01-02T10:26:43.221Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-01-02T10:26:43.276Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/runtimeconfig.googleapis.com 200
[debug] [2024-01-02T10:26:43.276Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-01-02T10:26:43.276Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da/adminSdkConfig [none]
[debug] [2024-01-02T10:26:43.482Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da/adminSdkConfig 200
[debug] [2024-01-02T10:26:43.482Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da/adminSdkConfig {"projectId":"bookfreak-954da","databaseURL":"https://bookfreak-954da-default-rtdb.firebaseio.com","storageBucket":"bookfreak-954da.appspot.com","locationId":"us-central"}
[debug] [2024-01-02T10:26:43.483Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/bookfreak-954da/configs [none]
[debug] [2024-01-02T10:26:43.742Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/bookfreak-954da/configs 200
[debug] [2024-01-02T10:26:43.743Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/bookfreak-954da/configs {}
[debug] [2024-01-02T10:26:43.745Z] Validating nodejs source
[debug] [2024-01-02T10:26:45.311Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "easy-currencies": "^1.7.0",
    "express": "^4.18.2",
    "firebase": "^10.7.1",
    "firebase-admin": "12.0.0",
    "firebase-functions": "4.5.0",
    "stripe": "^14.10.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2024-01-02T10:26:45.312Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-01-02T10:26:45.314Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-01-02T10:26:45.328Z] Found firebase-functions binary at 'C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8191

[debug] [2024-01-02T10:26:46.629Z] Got response from /__/functions.yaml {"endpoints":{"stripeFunctions":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"stripeFunctions"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\functions (83.78 KB) for uploading 
[debug] [2024-01-02T10:26:51.751Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/-/functions [none]
[debug] [2024-01-02T10:26:52.257Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/-/functions 200
[debug] [2024-01-02T10:26:52.257Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/-/functions {"functions":[{"name":"projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions","httpsTrigger":{"url":"https://us-central1-bookfreak-954da.cloudfunctions.net/stripeFunctions","securityLevel":"SECURE_ALWAYS"},"status":"ACTIVE","entryPoint":"stripeFunctions","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"bookfreak-954da@appspot.gserviceaccount.com","updateTime":"2024-01-01T18:00:37.963Z","versionId":"19","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"b9f08cd5b00f764973692a0cff5c8d941c8eeaf1"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/dda42ff6-a5cb-4c74-83fb-9292c83cc8a1.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"bookfreak-954da\",\"databaseURL\":\"https://bookfreak-954da-default-rtdb.firebaseio.com\",\"storageBucket\":\"bookfreak-954da.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"bookfreak-954da","EVENTARC_CLOUD_EVENT_SOURCE":"projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions"},"runtime":"nodejs18","ingressSettings":"ALLOW_ALL","buildId":"3e8eb44b-dde4-4da4-93a0-035d3414b382","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/389109624627/locations/us-central1/builds/3e8eb44b-dde4-4da4-93a0-035d3414b382","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{}}]}
[debug] [2024-01-02T10:26:52.260Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/bookfreak-954da/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2024-01-02T10:26:52.740Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/bookfreak-954da/locations/-/functions 200
[debug] [2024-01-02T10:26:52.740Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/bookfreak-954da/locations/-/functions {}
[debug] [2024-01-02T10:26:52.746Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da [none]
[debug] [2024-01-02T10:26:53.043Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da 200
[debug] [2024-01-02T10:26:53.044Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da {"projectId":"bookfreak-954da","projectNumber":"389109624627","displayName":"BookFreak","name":"projects/bookfreak-954da","resources":{"hostingSite":"bookfreak-954da","realtimeDatabaseInstance":"bookfreak-954da-default-rtdb","storageBucket":"bookfreak-954da.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_ffccf81b-0921-4365-a036-797cab7a6c35"}
[debug] [2024-01-02T10:26:53.046Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2024-01-02T10:26:53.046Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions:generateUploadUrl {}
[debug] [2024-01-02T10:26:53.511Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions:generateUploadUrl 200
[debug] [2024-01-02T10:26:53.511Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/96cb3569-abd2-4856-87fb-ea1e5adbac05.zip?GoogleAccessId=service-389109624627@gcf-admin-robot.iam.gserviceaccount.com&Expires=1704192895&Signature=uIvzCVE7ZS4Dwin8cn7CJWTy%2B6uX5JSGvnewWbLm7lVsqSg5EndUA8kViZwGzebMYoBHzaMymWMy9agDr9%2BfyncB%2Bn1KxcZk6iitPzxVaouf7ebH1yakvC4sNtdb3Vc7UI10xKVQp%2FU7VtIl%2BrGx3PKuLlhmqCwmz86XozxE1GvZQnb9jqLCZoIfumlNrFnrNWaIcbOxu77Nw2Xei%2FSmCXa79R%2Bz5cZOfE4uHHussKBy%2F0HenmV14kEYT8WWvkpTXqhlxxiUerybRsVt6bbBn1WvOp%2FymHALd%2FW1T3uMVTDKCb7NaWFna1OVaPYFFyVmQIWNU0s%2BmI0JOoevvhHVnw%3D%3D"}
[debug] [2024-01-02T10:26:53.513Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/96cb3569-abd2-4856-87fb-ea1e5adbac05.zip GoogleAccessId=service-389109624627%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1704192895&Signature=uIvzCVE7ZS4Dwin8cn7CJWTy%2B6uX5JSGvnewWbLm7lVsqSg5EndUA8kViZwGzebMYoBHzaMymWMy9agDr9%2BfyncB%2Bn1KxcZk6iitPzxVaouf7ebH1yakvC4sNtdb3Vc7UI10xKVQp%2FU7VtIl%2BrGx3PKuLlhmqCwmz86XozxE1GvZQnb9jqLCZoIfumlNrFnrNWaIcbOxu77Nw2Xei%2FSmCXa79R%2Bz5cZOfE4uHHussKBy%2F0HenmV14kEYT8WWvkpTXqhlxxiUerybRsVt6bbBn1WvOp%2FymHALd%2FW1T3uMVTDKCb7NaWFna1OVaPYFFyVmQIWNU0s%2BmI0JOoevvhHVnw%3D%3D
[debug] [2024-01-02T10:26:53.513Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/96cb3569-abd2-4856-87fb-ea1e5adbac05.zip [stream]
[debug] [2024-01-02T10:26:54.752Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/96cb3569-abd2-4856-87fb-ea1e5adbac05.zip 200
[debug] [2024-01-02T10:26:54.752Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/96cb3569-abd2-4856-87fb-ea1e5adbac05.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 18 (1st Gen) function stripeFunctions(us-central1)... 
[debug] [2024-01-02T10:26:54.761Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CminInstances%2CmaxInstances%2CingressSettings%2CenvironmentVariables%2CserviceAccountEmail%2CavailableMemoryMb%2Ctimeout%2CvpcConnector%2CvpcConnectorEgressSettings%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2024-01-02T10:26:54.761Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions {"name":"projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions","sourceUploadUrl":"https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/96cb3569-abd2-4856-87fb-ea1e5adbac05.zip?GoogleAccessId=service-389109624627@gcf-admin-robot.iam.gserviceaccount.com&Expires=1704192895&Signature=uIvzCVE7ZS4Dwin8cn7CJWTy%2B6uX5JSGvnewWbLm7lVsqSg5EndUA8kViZwGzebMYoBHzaMymWMy9agDr9%2BfyncB%2Bn1KxcZk6iitPzxVaouf7ebH1yakvC4sNtdb3Vc7UI10xKVQp%2FU7VtIl%2BrGx3PKuLlhmqCwmz86XozxE1GvZQnb9jqLCZoIfumlNrFnrNWaIcbOxu77Nw2Xei%2FSmCXa79R%2Bz5cZOfE4uHHussKBy%2F0HenmV14kEYT8WWvkpTXqhlxxiUerybRsVt6bbBn1WvOp%2FymHALd%2FW1T3uMVTDKCb7NaWFna1OVaPYFFyVmQIWNU0s%2BmI0JOoevvhHVnw%3D%3D","entryPoint":"stripeFunctions","runtime":"nodejs18","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"56a7d86075412506c752576ac9d7eaa197da86b6"},"httpsTrigger":{"securityLevel":"SECURE_ALWAYS"},"minInstances":null,"maxInstances":null,"ingressSettings":null,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"bookfreak-954da\",\"databaseURL\":\"https://bookfreak-954da-default-rtdb.firebaseio.com\",\"storageBucket\":\"bookfreak-954da.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"bookfreak-954da","EVENTARC_CLOUD_EVENT_SOURCE":"projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions"},"serviceAccountEmail":null,"availableMemoryMb":null,"timeout":null,"vpcConnector":null,"vpcConnectorEgressSettings":null,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2024-01-02T10:26:55.068Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions 403
[debug] [2024-01-02T10:26:55.068Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions {"error":{"code":403,"message":"Unable to retrieve the repository metadata for projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] !  functions: failed to update function projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions 
[error] Failed to update function projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions
[debug] [2024-01-02T10:26:55.079Z] Total Function Deployment time: 315
[debug] [2024-01-02T10:26:55.079Z] 1 Functions Deployed
[debug] [2024-01-02T10:26:55.079Z] 1 Functions Errored
[debug] [2024-01-02T10:26:55.079Z] 0 Function Deployments Aborted
[debug] [2024-01-02T10:26:55.079Z] Average Function Deployment time: 313
[info] 
[info] Functions deploy had errors with the following functions:
	stripeFunctions(us-central1)
[debug] [2024-01-02T10:26:55.316Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2024-01-02T10:26:55.319Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts/packages/stripe_functions [none]
[debug] [2024-01-02T10:26:55.321Z] >>> [apiv2][query] GET https://us.gcr.io/v2/bookfreak-954da/gcf/us-central1/tags/list [none]
[debug] [2024-01-02T10:26:55.682Z] <<< [apiv2][status] GET https://us.gcr.io/v2/bookfreak-954da/gcf/us-central1/tags/list 200
[debug] [2024-01-02T10:26:55.682Z] <<< [apiv2][body] GET https://us.gcr.io/v2/bookfreak-954da/gcf/us-central1/tags/list {"child":[],"manifest":{},"name":"bookfreak-954da/gcf/us-central1","tags":[]}
[debug] [2024-01-02T10:26:55.683Z] Could not find image for function projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions
[debug] [2024-01-02T10:26:56.109Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts/packages/stripe_functions 403
[debug] [2024-01-02T10:26:56.109Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts/packages/stripe_functions {"error":{"code":403,"message":"This API method requires billing to be enabled. Please enable billing on project #bookfreak-954da by visiting https://console.developers.google.com/billing/enable?project=bookfreak-954da then retry. If you enabled billing for this project recently, wait a few minutes for the action to propagate to our systems and retry.","status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console billing","url":"https://console.developers.google.com/billing/enable?project=bookfreak-954da"}]},{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"BILLING_DISABLED","domain":"googleapis.com","metadata":{"service":"artifactregistry.googleapis.com","consumer":"projects/bookfreak-954da"}}]}}
[warn] !  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/artifacts/docker/bookfreak-954da/us-central1/gcf-artifacts 
[debug] [2024-01-02T10:26:56.111Z] Functions deploy failed.
[debug] [2024-01-02T10:26:56.111Z] {
  "endpoint": {
    "id": "stripeFunctions",
    "project": "bookfreak-954da",
    "region": "us-central1",
    "entryPoint": "stripeFunctions",
    "platform": "gcfv1",
    "runtime": "nodejs18",
    "httpsTrigger": {},
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"bookfreak-954da\",\"databaseURL\":\"https://bookfreak-954da-default-rtdb.firebaseio.com\",\"storageBucket\":\"bookfreak-954da.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "bookfreak-954da",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions"
    },
    "codebase": "default",
    "securityLevel": "SECURE_ALWAYS",
    "targetedByOnly": false,
    "hash": "56a7d86075412506c752576ac9d7eaa197da86b6",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions"
    },
    "exit": 1,
    "message": "Failed to update function projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Unable to retrieve the repository metadata for projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "HTTP Error: 403, Unable to retrieve the repository metadata for projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2024-01-02T10:26:56.161Z] Error: Failed to update function stripeFunctions in region us-central1
    at C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:51:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV1Function (C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:347:32)
    at async Fabricator.updateEndpoint (C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:151:13)
    at async handle (C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2024-01-02T11:08:14.742Z] ----------------------------------------------------------------------
[debug] [2024-01-02T11:08:14.747Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2024-01-02T11:08:14.748Z] CLI Version:   12.9.1
[debug] [2024-01-02T11:08:14.749Z] Platform:      win32
[debug] [2024-01-02T11:08:14.749Z] Node Version:  v21.3.0
[debug] [2024-01-02T11:08:14.750Z] Time:          Tue Jan 02 2024 11:08:14 GMT+0000 (Greenwich Mean Time)
[debug] [2024-01-02T11:08:14.750Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-01-02T11:08:14.907Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-01-02T11:08:14.908Z] > authorizing via signed-in user (kshjssjjs@gmail.com)
[debug] [2024-01-02T11:08:14.908Z] [iam] checking project bookfreak-954da for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-01-02T11:08:14.911Z] > refreshing access token with scopes: []
[debug] [2024-01-02T11:08:14.915Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2024-01-02T11:08:14.915Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-01-02T11:08:15.148Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2024-01-02T11:08:15.149Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-01-02T11:08:15.161Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions [none]
[debug] [2024-01-02T11:08:15.162Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T11:08:15.162Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-01-02T11:08:15.984Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions 200
[debug] [2024-01-02T11:08:15.984Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-01-02T11:08:15.984Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/bookfreak-954da/serviceAccounts/bookfreak-954da@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-01-02T11:08:15.985Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/bookfreak-954da/serviceAccounts/bookfreak-954da@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-01-02T11:08:16.840Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/bookfreak-954da/serviceAccounts/bookfreak-954da@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2024-01-02T11:08:16.840Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/bookfreak-954da/serviceAccounts/bookfreak-954da@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'bookfreak-954da'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] +  functions: Finished running predeploy script. 
[debug] [2024-01-02T11:08:24.630Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da [none]
[debug] [2024-01-02T11:08:25.033Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da 200
[debug] [2024-01-02T11:08:25.034Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da {"projectId":"bookfreak-954da","projectNumber":"389109624627","displayName":"BookFreak","name":"projects/bookfreak-954da","resources":{"hostingSite":"bookfreak-954da","realtimeDatabaseInstance":"bookfreak-954da-default-rtdb","storageBucket":"bookfreak-954da.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_ffccf81b-0921-4365-a036-797cab7a6c35"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-01-02T11:08:25.038Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudfunctions.googleapis.com [none]
[debug] [2024-01-02T11:08:25.038Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T11:08:25.040Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/runtimeconfig.googleapis.com [none]
[debug] [2024-01-02T11:08:25.040Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T11:08:25.042Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudbuild.googleapis.com [none]
[debug] [2024-01-02T11:08:25.042Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudbuild.googleapis.com x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T11:08:25.044Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/artifactregistry.googleapis.com [none]
[debug] [2024-01-02T11:08:25.044Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/artifactregistry.googleapis.com x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T11:08:26.074Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudbuild.googleapis.com 200
[debug] [2024-01-02T11:08:26.074Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-01-02T11:08:26.077Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/runtimeconfig.googleapis.com 200
[debug] [2024-01-02T11:08:26.078Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-01-02T11:08:26.081Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/artifactregistry.googleapis.com 200
[debug] [2024-01-02T11:08:26.082Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-01-02T11:08:26.114Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudfunctions.googleapis.com 200
[debug] [2024-01-02T11:08:26.114Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-01-02T11:08:26.115Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da/adminSdkConfig [none]
[debug] [2024-01-02T11:08:26.338Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da/adminSdkConfig 200
[debug] [2024-01-02T11:08:26.338Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da/adminSdkConfig {"projectId":"bookfreak-954da","databaseURL":"https://bookfreak-954da-default-rtdb.firebaseio.com","storageBucket":"bookfreak-954da.appspot.com","locationId":"us-central"}
[debug] [2024-01-02T11:08:26.339Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/bookfreak-954da/configs [none]
[debug] [2024-01-02T11:08:26.629Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/bookfreak-954da/configs 200
[debug] [2024-01-02T11:08:26.629Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/bookfreak-954da/configs {}
[debug] [2024-01-02T11:08:26.632Z] Validating nodejs source
[debug] [2024-01-02T11:08:28.197Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "easy-currencies": "^1.7.0",
    "express": "^4.18.2",
    "firebase": "^10.7.1",
    "firebase-admin": "12.0.0",
    "firebase-functions": "4.5.0",
    "stripe": "^14.10.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2024-01-02T11:08:28.197Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-01-02T11:08:28.199Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-01-02T11:08:28.214Z] Found firebase-functions binary at 'C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8805

[debug] [2024-01-02T11:08:29.491Z] Got response from /__/functions.yaml {"endpoints":{"stripeFunctions":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"stripeFunctions"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\functions (83.78 KB) for uploading 
[debug] [2024-01-02T11:08:34.607Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/-/functions [none]
[debug] [2024-01-02T11:08:35.235Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/-/functions 200
[debug] [2024-01-02T11:08:35.235Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/-/functions {"functions":[{"name":"projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions","httpsTrigger":{"url":"https://us-central1-bookfreak-954da.cloudfunctions.net/stripeFunctions","securityLevel":"SECURE_ALWAYS"},"status":"ACTIVE","entryPoint":"stripeFunctions","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"bookfreak-954da@appspot.gserviceaccount.com","updateTime":"2024-01-01T18:00:37.963Z","versionId":"19","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"b9f08cd5b00f764973692a0cff5c8d941c8eeaf1"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/dda42ff6-a5cb-4c74-83fb-9292c83cc8a1.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"bookfreak-954da\",\"databaseURL\":\"https://bookfreak-954da-default-rtdb.firebaseio.com\",\"storageBucket\":\"bookfreak-954da.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"bookfreak-954da","EVENTARC_CLOUD_EVENT_SOURCE":"projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions"},"runtime":"nodejs18","ingressSettings":"ALLOW_ALL","buildId":"3e8eb44b-dde4-4da4-93a0-035d3414b382","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/389109624627/locations/us-central1/builds/3e8eb44b-dde4-4da4-93a0-035d3414b382","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{}}]}
[debug] [2024-01-02T11:08:35.238Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/bookfreak-954da/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2024-01-02T11:08:36.244Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/bookfreak-954da/locations/-/functions 200
[debug] [2024-01-02T11:08:36.244Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/bookfreak-954da/locations/-/functions {}
[debug] [2024-01-02T11:08:36.249Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da [none]
[debug] [2024-01-02T11:08:36.569Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da 200
[debug] [2024-01-02T11:08:36.569Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da {"projectId":"bookfreak-954da","projectNumber":"389109624627","displayName":"BookFreak","name":"projects/bookfreak-954da","resources":{"hostingSite":"bookfreak-954da","realtimeDatabaseInstance":"bookfreak-954da-default-rtdb","storageBucket":"bookfreak-954da.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_ffccf81b-0921-4365-a036-797cab7a6c35"}
[debug] [2024-01-02T11:08:36.572Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2024-01-02T11:08:36.572Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions:generateUploadUrl {}
[debug] [2024-01-02T11:08:37.143Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions:generateUploadUrl 200
[debug] [2024-01-02T11:08:37.144Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/c06cdd87-9bb8-4635-9b93-cee078dd9fc8.zip?GoogleAccessId=service-389109624627@gcf-admin-robot.iam.gserviceaccount.com&Expires=1704195398&Signature=VfITPx8rp1LW0dWW13sk8XV5xwFZMvkfA048It5RAvtfg0mdgV3mE4lcMC4xm8lBl62UQmJNVntlTXikn9%2FQJg5GieZVJLzVnxXuNFGgTPhzavqp70UrcE9o3WezEVSFQz7V23GoB2E1y5MyoZQ7DSk0A0%2FjTSy5kV6y0MqWo16PGIDlkVyMK6gfkMXa54GrSXMrPdMCy6%2BHORSFr5NcEJWu2dpSLIn7LIAGSpfj4p8%2Bt5K%2FoysooJF6dKaAu6LMEmFpZA42CPy8%2BVe84b7ZNkDkLgp19j3QIGj1DGZHLEEE2ZQjlLvYSkyo5dakp2y%2F3ABuBa%2BI316h896e0nTwyQ%3D%3D"}
[debug] [2024-01-02T11:08:37.145Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/c06cdd87-9bb8-4635-9b93-cee078dd9fc8.zip GoogleAccessId=service-389109624627%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1704195398&Signature=VfITPx8rp1LW0dWW13sk8XV5xwFZMvkfA048It5RAvtfg0mdgV3mE4lcMC4xm8lBl62UQmJNVntlTXikn9%2FQJg5GieZVJLzVnxXuNFGgTPhzavqp70UrcE9o3WezEVSFQz7V23GoB2E1y5MyoZQ7DSk0A0%2FjTSy5kV6y0MqWo16PGIDlkVyMK6gfkMXa54GrSXMrPdMCy6%2BHORSFr5NcEJWu2dpSLIn7LIAGSpfj4p8%2Bt5K%2FoysooJF6dKaAu6LMEmFpZA42CPy8%2BVe84b7ZNkDkLgp19j3QIGj1DGZHLEEE2ZQjlLvYSkyo5dakp2y%2F3ABuBa%2BI316h896e0nTwyQ%3D%3D
[debug] [2024-01-02T11:08:37.145Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/c06cdd87-9bb8-4635-9b93-cee078dd9fc8.zip [stream]
[debug] [2024-01-02T11:08:37.813Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/c06cdd87-9bb8-4635-9b93-cee078dd9fc8.zip 200
[debug] [2024-01-02T11:08:37.814Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/c06cdd87-9bb8-4635-9b93-cee078dd9fc8.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 18 (1st Gen) function stripeFunctions(us-central1)... 
[debug] [2024-01-02T11:08:37.822Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CminInstances%2CmaxInstances%2CingressSettings%2CenvironmentVariables%2CserviceAccountEmail%2CavailableMemoryMb%2Ctimeout%2CvpcConnector%2CvpcConnectorEgressSettings%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2024-01-02T11:08:37.822Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions {"name":"projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions","sourceUploadUrl":"https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/c06cdd87-9bb8-4635-9b93-cee078dd9fc8.zip?GoogleAccessId=service-389109624627@gcf-admin-robot.iam.gserviceaccount.com&Expires=1704195398&Signature=VfITPx8rp1LW0dWW13sk8XV5xwFZMvkfA048It5RAvtfg0mdgV3mE4lcMC4xm8lBl62UQmJNVntlTXikn9%2FQJg5GieZVJLzVnxXuNFGgTPhzavqp70UrcE9o3WezEVSFQz7V23GoB2E1y5MyoZQ7DSk0A0%2FjTSy5kV6y0MqWo16PGIDlkVyMK6gfkMXa54GrSXMrPdMCy6%2BHORSFr5NcEJWu2dpSLIn7LIAGSpfj4p8%2Bt5K%2FoysooJF6dKaAu6LMEmFpZA42CPy8%2BVe84b7ZNkDkLgp19j3QIGj1DGZHLEEE2ZQjlLvYSkyo5dakp2y%2F3ABuBa%2BI316h896e0nTwyQ%3D%3D","entryPoint":"stripeFunctions","runtime":"nodejs18","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"56a7d86075412506c752576ac9d7eaa197da86b6"},"httpsTrigger":{"securityLevel":"SECURE_ALWAYS"},"minInstances":null,"maxInstances":null,"ingressSettings":null,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"bookfreak-954da\",\"databaseURL\":\"https://bookfreak-954da-default-rtdb.firebaseio.com\",\"storageBucket\":\"bookfreak-954da.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"bookfreak-954da","EVENTARC_CLOUD_EVENT_SOURCE":"projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions"},"serviceAccountEmail":null,"availableMemoryMb":null,"timeout":null,"vpcConnector":null,"vpcConnectorEgressSettings":null,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2024-01-02T11:08:38.168Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions 403
[debug] [2024-01-02T11:08:38.168Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions {"error":{"code":403,"message":"Unable to retrieve the repository metadata for projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] !  functions: failed to update function projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions 
[error] Failed to update function projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions
[debug] [2024-01-02T11:08:38.178Z] Total Function Deployment time: 353
[debug] [2024-01-02T11:08:38.178Z] 1 Functions Deployed
[debug] [2024-01-02T11:08:38.178Z] 1 Functions Errored
[debug] [2024-01-02T11:08:38.178Z] 0 Function Deployments Aborted
[debug] [2024-01-02T11:08:38.178Z] Average Function Deployment time: 352
[info] 
[info] Functions deploy had errors with the following functions:
	stripeFunctions(us-central1)
[debug] [2024-01-02T11:08:38.290Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2024-01-02T11:08:38.292Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts/packages/stripe_functions [none]
[debug] [2024-01-02T11:08:38.294Z] >>> [apiv2][query] GET https://us.gcr.io/v2/bookfreak-954da/gcf/us-central1/tags/list [none]
[debug] [2024-01-02T11:08:38.580Z] <<< [apiv2][status] GET https://us.gcr.io/v2/bookfreak-954da/gcf/us-central1/tags/list 200
[debug] [2024-01-02T11:08:38.581Z] <<< [apiv2][body] GET https://us.gcr.io/v2/bookfreak-954da/gcf/us-central1/tags/list {"child":[],"manifest":{},"name":"bookfreak-954da/gcf/us-central1","tags":[]}
[debug] [2024-01-02T11:08:38.581Z] Could not find image for function projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions
[debug] [2024-01-02T11:08:39.089Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts/packages/stripe_functions 403
[debug] [2024-01-02T11:08:39.090Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts/packages/stripe_functions {"error":{"code":403,"message":"This API method requires billing to be enabled. Please enable billing on project #bookfreak-954da by visiting https://console.developers.google.com/billing/enable?project=bookfreak-954da then retry. If you enabled billing for this project recently, wait a few minutes for the action to propagate to our systems and retry.","status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console billing","url":"https://console.developers.google.com/billing/enable?project=bookfreak-954da"}]},{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"BILLING_DISABLED","domain":"googleapis.com","metadata":{"consumer":"projects/bookfreak-954da","service":"artifactregistry.googleapis.com"}}]}}
[warn] !  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/artifacts/docker/bookfreak-954da/us-central1/gcf-artifacts 
[debug] [2024-01-02T11:08:39.091Z] Functions deploy failed.
[debug] [2024-01-02T11:08:39.091Z] {
  "endpoint": {
    "id": "stripeFunctions",
    "project": "bookfreak-954da",
    "region": "us-central1",
    "entryPoint": "stripeFunctions",
    "platform": "gcfv1",
    "runtime": "nodejs18",
    "httpsTrigger": {},
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"bookfreak-954da\",\"databaseURL\":\"https://bookfreak-954da-default-rtdb.firebaseio.com\",\"storageBucket\":\"bookfreak-954da.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "bookfreak-954da",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions"
    },
    "codebase": "default",
    "securityLevel": "SECURE_ALWAYS",
    "targetedByOnly": false,
    "hash": "56a7d86075412506c752576ac9d7eaa197da86b6",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions"
    },
    "exit": 1,
    "message": "Failed to update function projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Unable to retrieve the repository metadata for projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "HTTP Error: 403, Unable to retrieve the repository metadata for projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2024-01-02T11:08:39.139Z] Error: Failed to update function stripeFunctions in region us-central1
    at C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:51:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV1Function (C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:347:32)
    at async Fabricator.updateEndpoint (C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:151:13)
    at async handle (C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2024-01-02T13:07:07.317Z] ----------------------------------------------------------------------
[debug] [2024-01-02T13:07:07.324Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2024-01-02T13:07:07.325Z] CLI Version:   12.9.1
[debug] [2024-01-02T13:07:07.325Z] Platform:      win32
[debug] [2024-01-02T13:07:07.326Z] Node Version:  v21.3.0
[debug] [2024-01-02T13:07:07.327Z] Time:          Tue Jan 02 2024 13:07:07 GMT+0000 (Greenwich Mean Time)
[debug] [2024-01-02T13:07:07.328Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-01-02T13:07:07.494Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-01-02T13:07:07.495Z] > authorizing via signed-in user (kshjssjjs@gmail.com)
[debug] [2024-01-02T13:07:07.496Z] [iam] checking project bookfreak-954da for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-01-02T13:07:07.499Z] > refreshing access token with scopes: []
[debug] [2024-01-02T13:07:07.504Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2024-01-02T13:07:07.504Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-01-02T13:07:07.832Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2024-01-02T13:07:07.833Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-01-02T13:07:07.846Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions [none]
[debug] [2024-01-02T13:07:07.846Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T13:07:07.846Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-01-02T13:07:08.669Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions 200
[debug] [2024-01-02T13:07:08.670Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-01-02T13:07:08.670Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/bookfreak-954da/serviceAccounts/bookfreak-954da@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-01-02T13:07:08.671Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/bookfreak-954da/serviceAccounts/bookfreak-954da@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-01-02T13:07:09.523Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/bookfreak-954da/serviceAccounts/bookfreak-954da@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2024-01-02T13:07:09.524Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/bookfreak-954da/serviceAccounts/bookfreak-954da@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'bookfreak-954da'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] +  functions: Finished running predeploy script. 
[debug] [2024-01-02T13:07:23.482Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da [none]
[debug] [2024-01-02T13:07:23.816Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da 200
[debug] [2024-01-02T13:07:23.817Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da {"projectId":"bookfreak-954da","projectNumber":"389109624627","displayName":"BookFreak","name":"projects/bookfreak-954da","resources":{"hostingSite":"bookfreak-954da","realtimeDatabaseInstance":"bookfreak-954da-default-rtdb","storageBucket":"bookfreak-954da.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_ffccf81b-0921-4365-a036-797cab7a6c35"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-01-02T13:07:23.820Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudfunctions.googleapis.com [none]
[debug] [2024-01-02T13:07:23.821Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T13:07:23.823Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/runtimeconfig.googleapis.com [none]
[debug] [2024-01-02T13:07:23.823Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T13:07:23.825Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudbuild.googleapis.com [none]
[debug] [2024-01-02T13:07:23.825Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudbuild.googleapis.com x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T13:07:23.827Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/artifactregistry.googleapis.com [none]
[debug] [2024-01-02T13:07:23.827Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/artifactregistry.googleapis.com x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T13:07:24.856Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/runtimeconfig.googleapis.com 200
[debug] [2024-01-02T13:07:24.857Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-01-02T13:07:24.859Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/artifactregistry.googleapis.com 200
[debug] [2024-01-02T13:07:24.859Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-01-02T13:07:24.861Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudbuild.googleapis.com 200
[debug] [2024-01-02T13:07:24.861Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-01-02T13:07:24.944Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudfunctions.googleapis.com 200
[debug] [2024-01-02T13:07:24.944Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-01-02T13:07:24.945Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da/adminSdkConfig [none]
[debug] [2024-01-02T13:07:25.181Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da/adminSdkConfig 200
[debug] [2024-01-02T13:07:25.181Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da/adminSdkConfig {"projectId":"bookfreak-954da","databaseURL":"https://bookfreak-954da-default-rtdb.firebaseio.com","storageBucket":"bookfreak-954da.appspot.com","locationId":"us-central"}
[debug] [2024-01-02T13:07:25.182Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/bookfreak-954da/configs [none]
[debug] [2024-01-02T13:07:25.615Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/bookfreak-954da/configs 200
[debug] [2024-01-02T13:07:25.615Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/bookfreak-954da/configs {}
[debug] [2024-01-02T13:07:25.618Z] Validating nodejs source
[debug] [2024-01-02T13:07:27.323Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "easy-currencies": "^1.7.0",
    "express": "^4.18.2",
    "firebase": "^10.7.1",
    "firebase-admin": "12.0.0",
    "firebase-functions": "4.5.0",
    "stripe": "^14.10.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2024-01-02T13:07:27.324Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-01-02T13:07:27.326Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-01-02T13:07:27.342Z] Found firebase-functions binary at 'C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8938

[debug] [2024-01-02T13:07:28.949Z] Got response from /__/functions.yaml {"endpoints":{"stripeFunctions":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"stripeFunctions"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\functions (83.78 KB) for uploading 
[debug] [2024-01-02T13:07:34.116Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/-/functions [none]
[debug] [2024-01-02T13:07:34.695Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/-/functions 200
[debug] [2024-01-02T13:07:34.695Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/-/functions {"functions":[{"name":"projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions","httpsTrigger":{"url":"https://us-central1-bookfreak-954da.cloudfunctions.net/stripeFunctions","securityLevel":"SECURE_ALWAYS"},"status":"ACTIVE","entryPoint":"stripeFunctions","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"bookfreak-954da@appspot.gserviceaccount.com","updateTime":"2024-01-01T18:00:37.963Z","versionId":"19","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"b9f08cd5b00f764973692a0cff5c8d941c8eeaf1"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/dda42ff6-a5cb-4c74-83fb-9292c83cc8a1.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"bookfreak-954da\",\"databaseURL\":\"https://bookfreak-954da-default-rtdb.firebaseio.com\",\"storageBucket\":\"bookfreak-954da.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"bookfreak-954da","EVENTARC_CLOUD_EVENT_SOURCE":"projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions"},"runtime":"nodejs18","ingressSettings":"ALLOW_ALL","buildId":"3e8eb44b-dde4-4da4-93a0-035d3414b382","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/389109624627/locations/us-central1/builds/3e8eb44b-dde4-4da4-93a0-035d3414b382","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{}}]}
[debug] [2024-01-02T13:07:34.698Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/bookfreak-954da/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2024-01-02T13:07:35.206Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/bookfreak-954da/locations/-/functions 200
[debug] [2024-01-02T13:07:35.207Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/bookfreak-954da/locations/-/functions {}
[debug] [2024-01-02T13:07:35.213Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da [none]
[debug] [2024-01-02T13:07:35.510Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da 200
[debug] [2024-01-02T13:07:35.511Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da {"projectId":"bookfreak-954da","projectNumber":"389109624627","displayName":"BookFreak","name":"projects/bookfreak-954da","resources":{"hostingSite":"bookfreak-954da","realtimeDatabaseInstance":"bookfreak-954da-default-rtdb","storageBucket":"bookfreak-954da.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_ffccf81b-0921-4365-a036-797cab7a6c35"}
[debug] [2024-01-02T13:07:35.513Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2024-01-02T13:07:35.514Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions:generateUploadUrl {}
[debug] [2024-01-02T13:07:35.997Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions:generateUploadUrl 200
[debug] [2024-01-02T13:07:35.997Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/989ea214-2a06-4bf7-b278-d1a6351e47e2.zip?GoogleAccessId=service-389109624627@gcf-admin-robot.iam.gserviceaccount.com&Expires=1704202537&Signature=vZDHByojHVTLzKc%2B6WU39S1WIZH%2BpdXmuGhDS78VCuRKe1azbgQNzNxPC6Ua462s8Krklboo002hRi5P%2BYfkHAA%2FlFkmqxeR3r3YUhgBJQfH1guTQGdbnDnaLZQCt%2BV9FetGHNm1sCU4ZZ0W4N%2BafoVfAipJ9LZRcdSICAYmJ2%2B7xfw8Ahejrn1dh3I%2FLImXagGlSkIuW48wxMrki%2FwMOnab%2FmdE4pGBi37YznjAJGs2wtWAB4EivmOtli7zsURILCkbZ23CFghg3SbXTm3ARG2ZIGHZsj1HM1JgJLDi8czCNpvHzQra1TG6YyUqEuDUIGltkFl%2BxTjKRtXJa9CGPQ%3D%3D"}
[debug] [2024-01-02T13:07:35.999Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/989ea214-2a06-4bf7-b278-d1a6351e47e2.zip GoogleAccessId=service-389109624627%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1704202537&Signature=vZDHByojHVTLzKc%2B6WU39S1WIZH%2BpdXmuGhDS78VCuRKe1azbgQNzNxPC6Ua462s8Krklboo002hRi5P%2BYfkHAA%2FlFkmqxeR3r3YUhgBJQfH1guTQGdbnDnaLZQCt%2BV9FetGHNm1sCU4ZZ0W4N%2BafoVfAipJ9LZRcdSICAYmJ2%2B7xfw8Ahejrn1dh3I%2FLImXagGlSkIuW48wxMrki%2FwMOnab%2FmdE4pGBi37YznjAJGs2wtWAB4EivmOtli7zsURILCkbZ23CFghg3SbXTm3ARG2ZIGHZsj1HM1JgJLDi8czCNpvHzQra1TG6YyUqEuDUIGltkFl%2BxTjKRtXJa9CGPQ%3D%3D
[debug] [2024-01-02T13:07:35.999Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/989ea214-2a06-4bf7-b278-d1a6351e47e2.zip [stream]
[debug] [2024-01-02T13:07:36.606Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/989ea214-2a06-4bf7-b278-d1a6351e47e2.zip 200
[debug] [2024-01-02T13:07:36.606Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/989ea214-2a06-4bf7-b278-d1a6351e47e2.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 18 (1st Gen) function stripeFunctions(us-central1)... 
[debug] [2024-01-02T13:07:36.615Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CminInstances%2CmaxInstances%2CingressSettings%2CenvironmentVariables%2CserviceAccountEmail%2CavailableMemoryMb%2Ctimeout%2CvpcConnector%2CvpcConnectorEgressSettings%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2024-01-02T13:07:36.615Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions {"name":"projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions","sourceUploadUrl":"https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/989ea214-2a06-4bf7-b278-d1a6351e47e2.zip?GoogleAccessId=service-389109624627@gcf-admin-robot.iam.gserviceaccount.com&Expires=1704202537&Signature=vZDHByojHVTLzKc%2B6WU39S1WIZH%2BpdXmuGhDS78VCuRKe1azbgQNzNxPC6Ua462s8Krklboo002hRi5P%2BYfkHAA%2FlFkmqxeR3r3YUhgBJQfH1guTQGdbnDnaLZQCt%2BV9FetGHNm1sCU4ZZ0W4N%2BafoVfAipJ9LZRcdSICAYmJ2%2B7xfw8Ahejrn1dh3I%2FLImXagGlSkIuW48wxMrki%2FwMOnab%2FmdE4pGBi37YznjAJGs2wtWAB4EivmOtli7zsURILCkbZ23CFghg3SbXTm3ARG2ZIGHZsj1HM1JgJLDi8czCNpvHzQra1TG6YyUqEuDUIGltkFl%2BxTjKRtXJa9CGPQ%3D%3D","entryPoint":"stripeFunctions","runtime":"nodejs18","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"56a7d86075412506c752576ac9d7eaa197da86b6"},"httpsTrigger":{"securityLevel":"SECURE_ALWAYS"},"minInstances":null,"maxInstances":null,"ingressSettings":null,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"bookfreak-954da\",\"databaseURL\":\"https://bookfreak-954da-default-rtdb.firebaseio.com\",\"storageBucket\":\"bookfreak-954da.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"bookfreak-954da","EVENTARC_CLOUD_EVENT_SOURCE":"projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions"},"serviceAccountEmail":null,"availableMemoryMb":null,"timeout":null,"vpcConnector":null,"vpcConnectorEgressSettings":null,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2024-01-02T13:07:36.916Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions 403
[debug] [2024-01-02T13:07:36.917Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions {"error":{"code":403,"message":"Unable to retrieve the repository metadata for projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] !  functions: failed to update function projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions 
[error] Failed to update function projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions
[debug] [2024-01-02T13:07:36.928Z] Total Function Deployment time: 308
[debug] [2024-01-02T13:07:36.928Z] 1 Functions Deployed
[debug] [2024-01-02T13:07:36.928Z] 1 Functions Errored
[debug] [2024-01-02T13:07:36.928Z] 0 Function Deployments Aborted
[debug] [2024-01-02T13:07:36.928Z] Average Function Deployment time: 307
[info] 
[info] Functions deploy had errors with the following functions:
	stripeFunctions(us-central1)
[debug] [2024-01-02T13:07:37.106Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2024-01-02T13:07:37.109Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts/packages/stripe_functions [none]
[debug] [2024-01-02T13:07:37.110Z] >>> [apiv2][query] GET https://us.gcr.io/v2/bookfreak-954da/gcf/us-central1/tags/list [none]
[debug] [2024-01-02T13:07:37.705Z] <<< [apiv2][status] GET https://us.gcr.io/v2/bookfreak-954da/gcf/us-central1/tags/list 200
[debug] [2024-01-02T13:07:37.705Z] <<< [apiv2][body] GET https://us.gcr.io/v2/bookfreak-954da/gcf/us-central1/tags/list {"child":[],"manifest":{},"name":"bookfreak-954da/gcf/us-central1","tags":[]}
[debug] [2024-01-02T13:07:37.705Z] Could not find image for function projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions
[debug] [2024-01-02T13:07:37.894Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts/packages/stripe_functions 403
[debug] [2024-01-02T13:07:37.895Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts/packages/stripe_functions {"error":{"code":403,"message":"This API method requires billing to be enabled. Please enable billing on project #bookfreak-954da by visiting https://console.developers.google.com/billing/enable?project=bookfreak-954da then retry. If you enabled billing for this project recently, wait a few minutes for the action to propagate to our systems and retry.","status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console billing","url":"https://console.developers.google.com/billing/enable?project=bookfreak-954da"}]},{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"BILLING_DISABLED","domain":"googleapis.com","metadata":{"service":"artifactregistry.googleapis.com","consumer":"projects/bookfreak-954da"}}]}}
[warn] !  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/artifacts/docker/bookfreak-954da/us-central1/gcf-artifacts 
[debug] [2024-01-02T13:07:37.896Z] Functions deploy failed.
[debug] [2024-01-02T13:07:37.896Z] {
  "endpoint": {
    "id": "stripeFunctions",
    "project": "bookfreak-954da",
    "region": "us-central1",
    "entryPoint": "stripeFunctions",
    "platform": "gcfv1",
    "runtime": "nodejs18",
    "httpsTrigger": {},
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"bookfreak-954da\",\"databaseURL\":\"https://bookfreak-954da-default-rtdb.firebaseio.com\",\"storageBucket\":\"bookfreak-954da.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "bookfreak-954da",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions"
    },
    "codebase": "default",
    "securityLevel": "SECURE_ALWAYS",
    "targetedByOnly": false,
    "hash": "56a7d86075412506c752576ac9d7eaa197da86b6",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions"
    },
    "exit": 1,
    "message": "Failed to update function projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Unable to retrieve the repository metadata for projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "HTTP Error: 403, Unable to retrieve the repository metadata for projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2024-01-02T13:07:37.966Z] Error: Failed to update function stripeFunctions in region us-central1
    at C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:51:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV1Function (C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:347:32)
    at async Fabricator.updateEndpoint (C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:151:13)
    at async handle (C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2024-01-02T13:36:02.196Z] ----------------------------------------------------------------------
[debug] [2024-01-02T13:36:02.201Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\bin\firebase.js deploy
[debug] [2024-01-02T13:36:02.202Z] CLI Version:   12.9.1
[debug] [2024-01-02T13:36:02.203Z] Platform:      win32
[debug] [2024-01-02T13:36:02.203Z] Node Version:  v21.3.0
[debug] [2024-01-02T13:36:02.203Z] Time:          Tue Jan 02 2024 13:36:02 GMT+0000 (Greenwich Mean Time)
[debug] [2024-01-02T13:36:02.204Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-01-02T13:36:02.370Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-01-02T13:36:02.371Z] > authorizing via signed-in user (kshjssjjs@gmail.com)
[debug] [2024-01-02T13:36:02.372Z] [iam] checking project bookfreak-954da for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasedatabase.instances.update","firebasehosting.sites.update","firebaserules.releases.create","firebaserules.releases.update","firebaserules.rulesets.create"]
[debug] [2024-01-02T13:36:02.376Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions [none]
[debug] [2024-01-02T13:36:02.376Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T13:36:02.376Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasedatabase.instances.update","firebasehosting.sites.update","firebaserules.releases.create","firebaserules.releases.update","firebaserules.rulesets.create"]}
[debug] [2024-01-02T13:36:03.286Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions 200
[debug] [2024-01-02T13:36:03.286Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/bookfreak-954da:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasedatabase.instances.update","firebasehosting.sites.update","firebaserules.releases.create","firebaserules.releases.update","firebaserules.rulesets.create"]}
[debug] [2024-01-02T13:36:03.287Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/bookfreak-954da/serviceAccounts/bookfreak-954da@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-01-02T13:36:03.287Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/bookfreak-954da/serviceAccounts/bookfreak-954da@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-01-02T13:36:04.147Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/bookfreak-954da/serviceAccounts/bookfreak-954da@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2024-01-02T13:36:04.147Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/bookfreak-954da/serviceAccounts/bookfreak-954da@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-01-02T13:36:04.149Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da [none]
[debug] [2024-01-02T13:36:04.495Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da 200
[debug] [2024-01-02T13:36:04.495Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da {"projectId":"bookfreak-954da","projectNumber":"389109624627","displayName":"BookFreak","name":"projects/bookfreak-954da","resources":{"hostingSite":"bookfreak-954da","realtimeDatabaseInstance":"bookfreak-954da-default-rtdb","storageBucket":"bookfreak-954da.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_ffccf81b-0921-4365-a036-797cab7a6c35"}
[debug] [2024-01-02T13:36:04.496Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da [none]
[debug] [2024-01-02T13:36:04.938Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da 200
[debug] [2024-01-02T13:36:04.939Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da {"projectId":"bookfreak-954da","projectNumber":"389109624627","displayName":"BookFreak","name":"projects/bookfreak-954da","resources":{"hostingSite":"bookfreak-954da","realtimeDatabaseInstance":"bookfreak-954da-default-rtdb","storageBucket":"bookfreak-954da.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_ffccf81b-0921-4365-a036-797cab7a6c35"}
[info] 
[info] === Deploying to 'bookfreak-954da'...
[info] 
[info] i  deploying database, storage, functions, hosting 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] +  functions: Finished running predeploy script. 
[info] i  database: checking rules syntax... 
[debug] [2024-01-02T13:36:12.652Z] >>> [apiv2][query] GET https://firebasedatabase.googleapis.com/v1beta/projects/bookfreak-954da/locations/-/instances/bookfreak-954da-default-rtdb [none]
[debug] [2024-01-02T13:36:13.630Z] <<< [apiv2][status] GET https://firebasedatabase.googleapis.com/v1beta/projects/bookfreak-954da/locations/-/instances/bookfreak-954da-default-rtdb 200
[debug] [2024-01-02T13:36:13.630Z] <<< [apiv2][body] GET https://firebasedatabase.googleapis.com/v1beta/projects/bookfreak-954da/locations/-/instances/bookfreak-954da-default-rtdb {"name":"projects/389109624627/locations/us-central1/instances/bookfreak-954da-default-rtdb","project":"projects/389109624627","databaseUrl":"https://bookfreak-954da-default-rtdb.firebaseio.com","type":"DEFAULT_DATABASE","state":"ACTIVE"}
[debug] [2024-01-02T13:36:13.633Z] >>> [apiv2][query] PUT https://bookfreak-954da-default-rtdb.firebaseio.com/.settings/rules.json dryRun=true
[debug] [2024-01-02T13:36:13.634Z] >>> [apiv2][body] PUT https://bookfreak-954da-default-rtdb.firebaseio.com/.settings/rules.json "{\n  \"rules\": {\n \".read\":true,\n \".write\": \"auth.uid !== null\"\n }\n }"
[debug] [2024-01-02T13:36:14.012Z] <<< [apiv2][status] PUT https://bookfreak-954da-default-rtdb.firebaseio.com/.settings/rules.json 200
[debug] [2024-01-02T13:36:14.012Z] <<< [apiv2][body] PUT https://bookfreak-954da-default-rtdb.firebaseio.com/.settings/rules.json {"status":"ok"}
[info] +  database: rules syntax for database bookfreak-954da-default-rtdb is valid 
[debug] [2024-01-02T13:36:14.014Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da [none]
[debug] [2024-01-02T13:36:14.308Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da 200
[debug] [2024-01-02T13:36:14.308Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da {"projectId":"bookfreak-954da","projectNumber":"389109624627","displayName":"BookFreak","name":"projects/bookfreak-954da","resources":{"hostingSite":"bookfreak-954da","realtimeDatabaseInstance":"bookfreak-954da-default-rtdb","storageBucket":"bookfreak-954da.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_ffccf81b-0921-4365-a036-797cab7a6c35"}
[info] i  firebase.storage: checking storage.rules for compilation errors... 
[debug] [2024-01-02T13:36:14.311Z] >>> [apiv2][query] POST https://firebaserules.googleapis.com/v1/projects/bookfreak-954da:test [none]
[debug] [2024-01-02T13:36:14.311Z] >>> [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/bookfreak-954da:test [omitted]
[debug] [2024-01-02T13:36:15.163Z] <<< [apiv2][status] POST https://firebaserules.googleapis.com/v1/projects/bookfreak-954da:test 200
[debug] [2024-01-02T13:36:15.164Z] <<< [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/bookfreak-954da:test {}
[info] +  firebase.storage: rules file storage.rules compiled successfully 
[debug] [2024-01-02T13:36:15.166Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da [none]
[debug] [2024-01-02T13:36:15.397Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da 200
[debug] [2024-01-02T13:36:15.397Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da {"projectId":"bookfreak-954da","projectNumber":"389109624627","displayName":"BookFreak","name":"projects/bookfreak-954da","resources":{"hostingSite":"bookfreak-954da","realtimeDatabaseInstance":"bookfreak-954da-default-rtdb","storageBucket":"bookfreak-954da.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_ffccf81b-0921-4365-a036-797cab7a6c35"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-01-02T13:36:15.402Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudfunctions.googleapis.com [none]
[debug] [2024-01-02T13:36:15.402Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T13:36:15.404Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/runtimeconfig.googleapis.com [none]
[debug] [2024-01-02T13:36:15.404Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T13:36:15.406Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudbuild.googleapis.com [none]
[debug] [2024-01-02T13:36:15.407Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudbuild.googleapis.com x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T13:36:15.409Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/artifactregistry.googleapis.com [none]
[debug] [2024-01-02T13:36:15.409Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/artifactregistry.googleapis.com x-goog-quota-user=projects/bookfreak-954da
[debug] [2024-01-02T13:36:16.438Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/runtimeconfig.googleapis.com 200
[debug] [2024-01-02T13:36:16.439Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-01-02T13:36:16.444Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudbuild.googleapis.com 200
[debug] [2024-01-02T13:36:16.444Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-01-02T13:36:16.446Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/artifactregistry.googleapis.com 200
[debug] [2024-01-02T13:36:16.446Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-01-02T13:36:16.447Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudfunctions.googleapis.com 200
[debug] [2024-01-02T13:36:16.447Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/bookfreak-954da/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-01-02T13:36:16.448Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da/adminSdkConfig [none]
[debug] [2024-01-02T13:36:16.665Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da/adminSdkConfig 200
[debug] [2024-01-02T13:36:16.665Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da/adminSdkConfig {"projectId":"bookfreak-954da","databaseURL":"https://bookfreak-954da-default-rtdb.firebaseio.com","storageBucket":"bookfreak-954da.appspot.com","locationId":"us-central"}
[debug] [2024-01-02T13:36:16.666Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/bookfreak-954da/configs [none]
[debug] [2024-01-02T13:36:16.994Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/bookfreak-954da/configs 200
[debug] [2024-01-02T13:36:16.994Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/bookfreak-954da/configs {}
[debug] [2024-01-02T13:36:16.996Z] Validating nodejs source
[debug] [2024-01-02T13:36:18.564Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "body-parser": "^1.20.2",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "easy-currencies": "^1.7.0",
    "express": "^4.18.2",
    "firebase": "^10.7.1",
    "firebase-admin": "12.0.0",
    "firebase-functions": "4.5.0",
    "stripe": "^14.10.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2024-01-02T13:36:18.565Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-01-02T13:36:18.567Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-01-02T13:36:18.581Z] Found firebase-functions binary at 'C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8080

[debug] [2024-01-02T13:36:19.911Z] Got response from /__/functions.yaml {"endpoints":{"stripeFunctions":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"stripeFunctions"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\functions (83.78 KB) for uploading 
[debug] [2024-01-02T13:36:25.032Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/-/functions [none]
[debug] [2024-01-02T13:36:25.579Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/-/functions 200
[debug] [2024-01-02T13:36:25.579Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/-/functions {"functions":[{"name":"projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions","httpsTrigger":{"url":"https://us-central1-bookfreak-954da.cloudfunctions.net/stripeFunctions","securityLevel":"SECURE_ALWAYS"},"status":"ACTIVE","entryPoint":"stripeFunctions","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"bookfreak-954da@appspot.gserviceaccount.com","updateTime":"2024-01-01T18:00:37.963Z","versionId":"19","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"b9f08cd5b00f764973692a0cff5c8d941c8eeaf1"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/dda42ff6-a5cb-4c74-83fb-9292c83cc8a1.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"bookfreak-954da\",\"databaseURL\":\"https://bookfreak-954da-default-rtdb.firebaseio.com\",\"storageBucket\":\"bookfreak-954da.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"bookfreak-954da","EVENTARC_CLOUD_EVENT_SOURCE":"projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions"},"runtime":"nodejs18","ingressSettings":"ALLOW_ALL","buildId":"3e8eb44b-dde4-4da4-93a0-035d3414b382","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/389109624627/locations/us-central1/builds/3e8eb44b-dde4-4da4-93a0-035d3414b382","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{}}]}
[debug] [2024-01-02T13:36:25.581Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/bookfreak-954da/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2024-01-02T13:36:26.093Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/bookfreak-954da/locations/-/functions 200
[debug] [2024-01-02T13:36:26.093Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/bookfreak-954da/locations/-/functions {}
[debug] [2024-01-02T13:36:26.099Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da [none]
[debug] [2024-01-02T13:36:26.337Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da 200
[debug] [2024-01-02T13:36:26.338Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/bookfreak-954da {"projectId":"bookfreak-954da","projectNumber":"389109624627","displayName":"BookFreak","name":"projects/bookfreak-954da","resources":{"hostingSite":"bookfreak-954da","realtimeDatabaseInstance":"bookfreak-954da-default-rtdb","storageBucket":"bookfreak-954da.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_ffccf81b-0921-4365-a036-797cab7a6c35"}
[debug] [2024-01-02T13:36:26.343Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/bookfreak-954da/versions [none]
[debug] [2024-01-02T13:36:26.343Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/bookfreak-954da/versions {"status":"CREATED","labels":{"deployment-tool":"cli-firebase"}}
[debug] [2024-01-02T13:36:28.098Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/bookfreak-954da/versions 200
[debug] [2024-01-02T13:36:28.099Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/bookfreak-954da/versions {"name":"projects/389109624627/sites/bookfreak-954da/versions/cad05985a1e92cc5","status":"CREATED","config":{},"labels":{"deployment-tool":"cli-firebase"}}
[debug] [2024-01-02T13:36:28.100Z] >>> [apiv2][query] GET https://firebaserules.googleapis.com/v1/projects/bookfreak-954da/releases pageSize=10&pageToken=
[debug] [2024-01-02T13:36:28.437Z] <<< [apiv2][status] GET https://firebaserules.googleapis.com/v1/projects/bookfreak-954da/releases 200
[debug] [2024-01-02T13:36:28.438Z] <<< [apiv2][body] GET https://firebaserules.googleapis.com/v1/projects/bookfreak-954da/releases {"releases":[{"name":"projects/bookfreak-954da/releases/firebase.storage/bookfreak-954da.appspot.com","rulesetName":"projects/bookfreak-954da/rulesets/f6bf45a1-ba22-470c-a25f-48a5690554ff","createTime":"2023-12-25T19:50:22.008929Z","updateTime":"2024-01-02T09:36:37.728256Z"}]}
[debug] [2024-01-02T13:36:28.438Z] >>> [apiv2][query] GET https://firebaserules.googleapis.com/v1/projects/bookfreak-954da/rulesets/f6bf45a1-ba22-470c-a25f-48a5690554ff [none]
[debug] [2024-01-02T13:36:29.172Z] <<< [apiv2][status] GET https://firebaserules.googleapis.com/v1/projects/bookfreak-954da/rulesets/f6bf45a1-ba22-470c-a25f-48a5690554ff 200
[debug] [2024-01-02T13:36:29.173Z] <<< [apiv2][body] GET https://firebaserules.googleapis.com/v1/projects/bookfreak-954da/rulesets/f6bf45a1-ba22-470c-a25f-48a5690554ff [omitted]
[info] i  storage: latest version of storage.rules already up to date, skipping upload... 
[debug] [2024-01-02T13:36:29.176Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2024-01-02T13:36:29.177Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions:generateUploadUrl {}
[debug] [2024-01-02T13:36:29.682Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions:generateUploadUrl 200
[debug] [2024-01-02T13:36:29.682Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/d9e01afd-4d07-4065-8ec7-15e06873121f.zip?GoogleAccessId=service-389109624627@gcf-admin-robot.iam.gserviceaccount.com&Expires=1704204271&Signature=Y36yvQvTPC%2BrFG8E6llvKvILIUslOahsuEWua1hK23AI8UHIlm58FE%2Bip5UaFSRRrujBqiSpo%2FU7Xir%2B3nmZKcVJsO8kh7uw6red3mWi0Qi%2F%2BFDK9jPNUE6FzzCt%2F5z3MK%2Fv2h1wXPytGhwfyodireaO4ThokpSPE8mh7VH%2FE5klUvzZNzo2ZQHgPTgtsd42U0oUIfbs6URKyoFptjMTvJBGfky%2BpapJ%2BXwY%2BtAN4N%2F67cnGt%2Fs6mMSyzqGh7ZDdbDCJ3QImkSocmqOHtRg%2F8bYLw2j%2BvTkOJv6rX5TFHAAo7DmOQ9%2BLwNgIuLIvzxB1Q4%2FVAsyXWGfqN02lGIekLw%3D%3D"}
[debug] [2024-01-02T13:36:29.684Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/d9e01afd-4d07-4065-8ec7-15e06873121f.zip GoogleAccessId=service-389109624627%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1704204271&Signature=Y36yvQvTPC%2BrFG8E6llvKvILIUslOahsuEWua1hK23AI8UHIlm58FE%2Bip5UaFSRRrujBqiSpo%2FU7Xir%2B3nmZKcVJsO8kh7uw6red3mWi0Qi%2F%2BFDK9jPNUE6FzzCt%2F5z3MK%2Fv2h1wXPytGhwfyodireaO4ThokpSPE8mh7VH%2FE5klUvzZNzo2ZQHgPTgtsd42U0oUIfbs6URKyoFptjMTvJBGfky%2BpapJ%2BXwY%2BtAN4N%2F67cnGt%2Fs6mMSyzqGh7ZDdbDCJ3QImkSocmqOHtRg%2F8bYLw2j%2BvTkOJv6rX5TFHAAo7DmOQ9%2BLwNgIuLIvzxB1Q4%2FVAsyXWGfqN02lGIekLw%3D%3D
[debug] [2024-01-02T13:36:29.684Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/d9e01afd-4d07-4065-8ec7-15e06873121f.zip [stream]
[debug] [2024-01-02T13:36:30.332Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/d9e01afd-4d07-4065-8ec7-15e06873121f.zip 200
[debug] [2024-01-02T13:36:30.332Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/d9e01afd-4d07-4065-8ec7-15e06873121f.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  hosting[bookfreak-954da]: beginning deploy... 
[info] i  hosting[bookfreak-954da]: found 28 files in ./build 
[debug] [2024-01-02T13:36:30.368Z] [hosting] uploading with 200 concurrency
[debug] [2024-01-02T13:36:30.372Z] [hosting] hash cache [YnVpbGQ] not populated
[debug] [2024-01-02T13:36:33.663Z] [hosting] unable to store hash cache [YnVpbGQ]: Error: ENOENT: no such file or directory, open 'C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\.firebase\hosting.YnVpbGQ.cache'
    at Object.writeFileSync (node:fs:2352:20)
    at Object.outputFileSync (C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\fs-extra\lib\output-file\index.js:31:15)
    at dump (C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\hosting\hashcache.js:41:12)
    at C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\hosting\uploader.js:81:34
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
[debug] [2024-01-02T13:36:33.663Z] [hosting][hash queue][FINAL] {"max":3254,"min":53,"avg":254.89285714285714,"active":0,"complete":28,"success":28,"errored":0,"retried":0,"total":28,"elapsed":3287}
[debug] [2024-01-02T13:36:33.664Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/389109624627/sites/bookfreak-954da/versions/cad05985a1e92cc5:populateFiles [none]
[debug] [2024-01-02T13:36:33.664Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/389109624627/sites/bookfreak-954da/versions/cad05985a1e92cc5:populateFiles {"files":{"/asset-manifest.json":"8f8a29fb2dd898431bd931ab1f1cdafaeec03bc44cead4614a017a3a42098074","/index.html":"4c9e283086ed57a8d5a3fcc36eb189a28fa8d036578cdcdcfa681551e4620ae3","/favicon.ico":"27edce7be5922cf0bef7d4136f69b5bfbdd5bf8c13c7b026f71187d41a00aa7d","/logo512.png":"212b102aa09e51b3b3e06647e81f7801a61333e171f6582e8124379aabccb41d","/manifest.json":"ee04fb47e525c67d8424ffe9b4d8a8a24e434504478afca4e0ca602146836d4c","/logo192.png":"79e2b749561016bc8af300ea19f48347ceed3cb1a54f48ae456172eca45e08f0","/robots.txt":"bfe106a3fb878dc83461c86818bf74fc1bdc7f28538ba613cd3e775516ce8b49","/static/js/main.a6b981d2.js.LICENSE.txt":"eb658f7006fb6ceb2147d70acd3b4eb1a5eea29213a3b9cac27b84f8470fea9b","/static/media/default-avatar-profile-trendy-style-social-media-user-icon-187599373.53da499e408d1c9221b3.jpg":"30826c3b940dcdd241fe6d020f8e0df934059743c105bf31b3f86a53bb5f4490","/static/media/moneyOption2.aa55d255fabf39996b98.webp":"964847d6c8778dba3e2cfc845f162d7205d34345aa93c043c4f4415d353fda81","/static/media/moneyOption4.94308bea5e005345bcf2.png":"9697d736ac6b544228865384f0b12d097d119bab8b647d11ba099e46a5296244","/static/media/ItemReward.e3e8d3ae0565ea726ccb.webp":"ad43e75913ff778bb89c4c7f9a19a7612ed452a9127ce6458f2ae59858994cb3","/static/media/moneyOption3.0749fe108671588af010.webp":"616bae6a463d7a32f1e502156d727cd40e47874b5ad138c41f785e15e177cb66","/static/css/main.1f3ca4b4.css.map":"d38ada0a4ccee5da8431e463403519202ca57a270d3ce6dbae92c63783201ff4","/static/media/moneyOption5.16fa155507c77324dfc8.webp":"321f750d123a8961304db9467db49efb92b7dfe0073ff5f3db336459a8a52c9e","/static/media/moneyOption1.50f877d8a0b60a3bb5aa.webp":"8ff76e242ce76a10e62be8045965ad8d132a06520cb3432df247edf1e91a88de","/static/css/main.1f3ca4b4.css":"799c737a636fe122f857f489a1e88a079b7b70a533c09bd285f11bdb870d916b","/static/media/Zrzut ekranu (1128).40dfeda175996160c610.png":"b047489b3bb913b4ead8e429e83c3ebf539511b2e0c1ab47fbe438ebec96c570","/static/media/Zrzut_ekranu_999.86020d96b442bd215efe.png":"87e43ffcbcae650d2a0b229149cff33d73198c0dc72e2cc48ff7192de10159c3","/static/media/Zrzut_ekranu_983.fe687af7ace2f848e71f.png":"fa40593aa28ee1b99154845cdfdc28cc277cf92e32083855f2c09a5fec4494e5","/static/media/MoneyPrize.4b9597fa3c06e8cace95.webp":"af106acdb86106d39882372660af889d39a2528e23a399956bd6b6d4d2e36eab","/static/media/another.6eec52e09ced39b38971.png":"66bf9000f5318e8c0ec8561a5f3cba8a14e0b0a7715ebd3fdb13b6fb7090ca2a","/static/media/istockphoto-1195780698-612x612_prev_ui.861a82c6f5be3d624804.png":"f240ecd36e3a2444c4925405f761168b03c3f64f466c1787af24fd5c11022f42","/static/media/Screenshot (1174).f00c0ff47542d4f53231.png":"9e25e36192ff7dc184df74c317ff059e6bc1dd2fabde8462f7f968c17357ed3f","/static/media/Screenshot (1167).044d26cd28068dbc9ec1.png":"ad819e8f49b405a89357d8c6d4087a552bc839df4bf563f4b24170556780a37a","/static/media/about-image.e9f1d38b3965542f10a6.jpg":"50ee2b922fb4c59ea02d304b026f1c77433901084d39e3a4cd969e3a4b2fb848","/static/js/main.a6b981d2.js":"92d679fa01cd8f066a5af21d02a29ac74021bce39accdf23e5ea2171e787a84f","/static/js/main.a6b981d2.js.map":"4c407ce0eb277c8559d389280ec7f25f7edb14fc4eacbf01673fc026be656b7c"}}
[debug] [2024-01-02T13:36:35.065Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/389109624627/sites/bookfreak-954da/versions/cad05985a1e92cc5:populateFiles 200
[debug] [2024-01-02T13:36:35.065Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/389109624627/sites/bookfreak-954da/versions/cad05985a1e92cc5:populateFiles {"uploadUrl":"https://upload-firebasehosting.googleapis.com/upload/sites/bookfreak-954da/versions/cad05985a1e92cc5/files"}
[debug] [2024-01-02T13:36:35.066Z] [hosting][populate queue][FINAL] {"max":1430,"min":1430,"avg":1430,"active":0,"complete":1,"success":1,"errored":0,"retried":0,"total":1,"elapsed":1430}
[debug] [2024-01-02T13:36:35.066Z] [hosting] uploads queued: 0
[debug] [2024-01-02T13:36:35.066Z] [hosting][upload queue][FINAL] {"max":0,"min":9999999999,"avg":0,"active":0,"complete":0,"success":0,"errored":0,"retried":0,"total":0,"elapsed":1704202595066}
[info] +  hosting[bookfreak-954da]: file upload complete 
[debug] [2024-01-02T13:36:35.068Z] [hosting] deploy completed after 4732ms
[info] i  database: releasing rules... 
[debug] [2024-01-02T13:36:35.069Z] >>> [apiv2][query] GET https://firebasedatabase.googleapis.com/v1beta/projects/bookfreak-954da/locations/-/instances/bookfreak-954da-default-rtdb [none]
[debug] [2024-01-02T13:36:36.079Z] <<< [apiv2][status] GET https://firebasedatabase.googleapis.com/v1beta/projects/bookfreak-954da/locations/-/instances/bookfreak-954da-default-rtdb 200
[debug] [2024-01-02T13:36:36.079Z] <<< [apiv2][body] GET https://firebasedatabase.googleapis.com/v1beta/projects/bookfreak-954da/locations/-/instances/bookfreak-954da-default-rtdb {"name":"projects/389109624627/locations/us-central1/instances/bookfreak-954da-default-rtdb","project":"projects/389109624627","databaseUrl":"https://bookfreak-954da-default-rtdb.firebaseio.com","type":"DEFAULT_DATABASE","state":"ACTIVE"}
[debug] [2024-01-02T13:36:36.081Z] >>> [apiv2][query] PUT https://bookfreak-954da-default-rtdb.firebaseio.com/.settings/rules.json 
[debug] [2024-01-02T13:36:36.081Z] >>> [apiv2][body] PUT https://bookfreak-954da-default-rtdb.firebaseio.com/.settings/rules.json "{\n  \"rules\": {\n \".read\":true,\n \".write\": \"auth.uid !== null\"\n }\n }"
[debug] [2024-01-02T13:36:36.521Z] <<< [apiv2][status] PUT https://bookfreak-954da-default-rtdb.firebaseio.com/.settings/rules.json 200
[debug] [2024-01-02T13:36:36.522Z] <<< [apiv2][body] PUT https://bookfreak-954da-default-rtdb.firebaseio.com/.settings/rules.json {"status":"ok"}
[info] +  database: rules for database bookfreak-954da-default-rtdb released successfully 
[debug] [2024-01-02T13:36:36.523Z] [rules] releasing firebase.storage/bookfreak-954da.appspot.com with ruleset projects/bookfreak-954da/rulesets/f6bf45a1-ba22-470c-a25f-48a5690554ff
[debug] [2024-01-02T13:36:36.524Z] >>> [apiv2][query] PATCH https://firebaserules.googleapis.com/v1/projects/bookfreak-954da/releases/firebase.storage/bookfreak-954da.appspot.com [none]
[debug] [2024-01-02T13:36:36.524Z] >>> [apiv2][body] PATCH https://firebaserules.googleapis.com/v1/projects/bookfreak-954da/releases/firebase.storage/bookfreak-954da.appspot.com {"release":{"name":"projects/bookfreak-954da/releases/firebase.storage/bookfreak-954da.appspot.com","rulesetName":"projects/bookfreak-954da/rulesets/f6bf45a1-ba22-470c-a25f-48a5690554ff"}}
[debug] [2024-01-02T13:36:36.997Z] <<< [apiv2][status] PATCH https://firebaserules.googleapis.com/v1/projects/bookfreak-954da/releases/firebase.storage/bookfreak-954da.appspot.com 200
[debug] [2024-01-02T13:36:36.997Z] <<< [apiv2][body] PATCH https://firebaserules.googleapis.com/v1/projects/bookfreak-954da/releases/firebase.storage/bookfreak-954da.appspot.com {"name":"projects/bookfreak-954da/releases/firebase.storage/bookfreak-954da.appspot.com","rulesetName":"projects/bookfreak-954da/rulesets/f6bf45a1-ba22-470c-a25f-48a5690554ff","createTime":"2023-12-25T19:50:22.008929Z","updateTime":"2024-01-02T13:34:38.636978Z"}
[debug] [2024-01-02T13:36:36.998Z] [rules] updated release projects/bookfreak-954da/releases/firebase.storage/bookfreak-954da.appspot.com
[info] +  storage: released rules storage.rules to firebase.storage 
[info] i  functions: updating Node.js 18 (1st Gen) function stripeFunctions(us-central1)... 
[debug] [2024-01-02T13:36:37.006Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CminInstances%2CmaxInstances%2CingressSettings%2CenvironmentVariables%2CserviceAccountEmail%2CavailableMemoryMb%2Ctimeout%2CvpcConnector%2CvpcConnectorEgressSettings%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2024-01-02T13:36:37.007Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions {"name":"projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions","sourceUploadUrl":"https://storage.googleapis.com/uploads-455984526414.us-central1.cloudfunctions.appspot.com/d9e01afd-4d07-4065-8ec7-15e06873121f.zip?GoogleAccessId=service-389109624627@gcf-admin-robot.iam.gserviceaccount.com&Expires=1704204271&Signature=Y36yvQvTPC%2BrFG8E6llvKvILIUslOahsuEWua1hK23AI8UHIlm58FE%2Bip5UaFSRRrujBqiSpo%2FU7Xir%2B3nmZKcVJsO8kh7uw6red3mWi0Qi%2F%2BFDK9jPNUE6FzzCt%2F5z3MK%2Fv2h1wXPytGhwfyodireaO4ThokpSPE8mh7VH%2FE5klUvzZNzo2ZQHgPTgtsd42U0oUIfbs6URKyoFptjMTvJBGfky%2BpapJ%2BXwY%2BtAN4N%2F67cnGt%2Fs6mMSyzqGh7ZDdbDCJ3QImkSocmqOHtRg%2F8bYLw2j%2BvTkOJv6rX5TFHAAo7DmOQ9%2BLwNgIuLIvzxB1Q4%2FVAsyXWGfqN02lGIekLw%3D%3D","entryPoint":"stripeFunctions","runtime":"nodejs18","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"56a7d86075412506c752576ac9d7eaa197da86b6"},"httpsTrigger":{"securityLevel":"SECURE_ALWAYS"},"minInstances":null,"maxInstances":null,"ingressSettings":null,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"bookfreak-954da\",\"databaseURL\":\"https://bookfreak-954da-default-rtdb.firebaseio.com\",\"storageBucket\":\"bookfreak-954da.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"bookfreak-954da","EVENTARC_CLOUD_EVENT_SOURCE":"projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions"},"serviceAccountEmail":null,"availableMemoryMb":null,"timeout":null,"vpcConnector":null,"vpcConnectorEgressSettings":null,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2024-01-02T13:36:37.381Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions 403
[debug] [2024-01-02T13:36:37.381Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions {"error":{"code":403,"message":"Unable to retrieve the repository metadata for projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.","status":"PERMISSION_DENIED"}}
[warn] !  functions: failed to update function projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions 
[error] Failed to update function projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions
[debug] [2024-01-02T13:36:37.393Z] Total Function Deployment time: 382
[debug] [2024-01-02T13:36:37.394Z] 1 Functions Deployed
[debug] [2024-01-02T13:36:37.394Z] 1 Functions Errored
[debug] [2024-01-02T13:36:37.394Z] 0 Function Deployments Aborted
[debug] [2024-01-02T13:36:37.394Z] Average Function Deployment time: 380
[info] 
[info] Functions deploy had errors with the following functions:
	stripeFunctions(us-central1)
[debug] [2024-01-02T13:36:37.547Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2024-01-02T13:36:37.549Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts/packages/stripe_functions [none]
[debug] [2024-01-02T13:36:37.551Z] >>> [apiv2][query] GET https://us.gcr.io/v2/bookfreak-954da/gcf/us-central1/tags/list [none]
[debug] [2024-01-02T13:36:37.913Z] <<< [apiv2][status] GET https://us.gcr.io/v2/bookfreak-954da/gcf/us-central1/tags/list 200
[debug] [2024-01-02T13:36:37.914Z] <<< [apiv2][body] GET https://us.gcr.io/v2/bookfreak-954da/gcf/us-central1/tags/list {"child":[],"manifest":{},"name":"bookfreak-954da/gcf/us-central1","tags":[]}
[debug] [2024-01-02T13:36:37.914Z] Could not find image for function projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions
[debug] [2024-01-02T13:36:38.329Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts/packages/stripe_functions 403
[debug] [2024-01-02T13:36:38.330Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts/packages/stripe_functions {"error":{"code":403,"message":"This API method requires billing to be enabled. Please enable billing on project #bookfreak-954da by visiting https://console.developers.google.com/billing/enable?project=bookfreak-954da then retry. If you enabled billing for this project recently, wait a few minutes for the action to propagate to our systems and retry.","status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console billing","url":"https://console.developers.google.com/billing/enable?project=bookfreak-954da"}]},{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"BILLING_DISABLED","domain":"googleapis.com","metadata":{"service":"artifactregistry.googleapis.com","consumer":"projects/bookfreak-954da"}}]}}
[warn] !  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/artifacts/docker/bookfreak-954da/us-central1/gcf-artifacts 
[debug] [2024-01-02T13:36:38.331Z] Functions deploy failed.
[debug] [2024-01-02T13:36:38.331Z] {
  "endpoint": {
    "id": "stripeFunctions",
    "project": "bookfreak-954da",
    "region": "us-central1",
    "entryPoint": "stripeFunctions",
    "platform": "gcfv1",
    "runtime": "nodejs18",
    "httpsTrigger": {},
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"bookfreak-954da\",\"databaseURL\":\"https://bookfreak-954da-default-rtdb.firebaseio.com\",\"storageBucket\":\"bookfreak-954da.appspot.com\",\"locationId\":\"us-central\"}",
      "GCLOUD_PROJECT": "bookfreak-954da",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions"
    },
    "codebase": "default",
    "securityLevel": "SECURE_ALWAYS",
    "targetedByOnly": false,
    "hash": "56a7d86075412506c752576ac9d7eaa197da86b6",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions"
    },
    "exit": 1,
    "message": "Failed to update function projects/bookfreak-954da/locations/us-central1/functions/stripeFunctions",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 403,
            "message": "Unable to retrieve the repository metadata for projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
            "status": "PERMISSION_DENIED"
          }
        },
        "response": {
          "statusCode": 403
        }
      },
      "exit": 1,
      "message": "HTTP Error: 403, Unable to retrieve the repository metadata for projects/bookfreak-954da/locations/us-central1/repositories/gcf-artifacts. Ensure that the Cloud Functions service account has 'artifactregistry.repositories.list' and 'artifactregistry.repositories.get' permissions. You can add the permissions by granting the role 'roles/artifactregistry.reader'.",
      "status": 403
    },
    "status": 403,
    "code": 403
  }
}
[debug] [2024-01-02T13:36:38.398Z] Error: Failed to update function stripeFunctions in region us-central1
    at C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:51:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV1Function (C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:347:32)
    at async Fabricator.updateEndpoint (C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:151:13)
    at async handle (C:\Users\HP\OneDrive\Pulpit\BookFreak\bookfreak-project\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:88:17)
[error] 
[error] Error: There was an error deploying functions
