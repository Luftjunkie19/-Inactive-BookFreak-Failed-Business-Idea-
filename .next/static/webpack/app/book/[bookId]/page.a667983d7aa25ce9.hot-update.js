"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/book/[bookId]/page",{

/***/ "(app-pages-browser)/./app/book/[bookId]/page.tsx":
/*!************************************!*\
  !*** ./app/book/[bookId]/page.tsx ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"(app-pages-browser)/./node_modules/next/node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @swc/helpers/_/_object_spread */ \"(app-pages-browser)/./node_modules/next/node_modules/@swc/helpers/esm/_object_spread.js\");\n/* harmony import */ var _swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @swc/helpers/_/_object_spread_props */ \"(app-pages-browser)/./node_modules/next/node_modules/@swc/helpers/esm/_object_spread_props.js\");\n/* harmony import */ var _swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @swc/helpers/_/_sliced_to_array */ \"(app-pages-browser)/./node_modules/next/node_modules/@swc/helpers/esm/_sliced_to_array.js\");\n/* harmony import */ var _swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @swc/helpers/_/_to_consumable_array */ \"(app-pages-browser)/./node_modules/next/node_modules/@swc/helpers/esm/_to_consumable_array.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"(app-pages-browser)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_FaHeart_react_icons_fa__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! __barrel_optimize__?names=FaHeart!=!react-icons/fa */ \"(app-pages-browser)/./node_modules/react-icons/fa/index.mjs\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-redux */ \"(app-pages-browser)/./node_modules/react-redux/es/index.js\");\n/* harmony import */ var uniqid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uniqid */ \"(app-pages-browser)/./node_modules/uniqid/index.js\");\n/* harmony import */ var uniqid__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(uniqid__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var use_clipboard_copy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! use-clipboard-copy */ \"(app-pages-browser)/./node_modules/use-clipboard-copy/dist/index.js\");\n/* harmony import */ var use_clipboard_copy__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(use_clipboard_copy__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _assets_translations_AlertMessages_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../assets/translations/AlertMessages.json */ \"(app-pages-browser)/./assets/translations/AlertMessages.json\");\n/* harmony import */ var _components_Loader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../components/Loader */ \"(app-pages-browser)/./components/Loader.tsx\");\n/* harmony import */ var _context_SnackBarContext__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../context/SnackBarContext */ \"(app-pages-browser)/./context/SnackBarContext.tsx\");\n/* harmony import */ var _hooks_useAuthContext__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../hooks/useAuthContext */ \"(app-pages-browser)/./hooks/useAuthContext.tsx\");\n/* harmony import */ var _hooks_useGetDocument__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../hooks/useGetDocument */ \"(app-pages-browser)/./hooks/useGetDocument.tsx\");\n/* harmony import */ var _hooks_useGetDocuments__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../hooks/useGetDocuments */ \"(app-pages-browser)/./hooks/useGetDocuments.tsx\");\n/* harmony import */ var _hooks_useRealDatabase__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../hooks/useRealDatabase */ \"(app-pages-browser)/./hooks/useRealDatabase.tsx\");\n/* harmony import */ var _hooks_useRealtimeDocument__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../hooks/useRealtimeDocument */ \"(app-pages-browser)/./hooks/useRealtimeDocument.tsx\");\n/* harmony import */ var _hooks_useRealtimeDocuments__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../hooks/useRealtimeDocuments */ \"(app-pages-browser)/./hooks/useRealtimeDocuments.tsx\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\n// import CompetitionMembers\n//   from '../../components/CommunityComponents/CompetitionMembers';\n\n\n\n\n\n\n\n\n\nfunction Book(param) {\n    var params = param.params;\n    _s();\n    var id = params.bookId;\n    var dispatch = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useDispatch)();\n    var navigate = (0,next_navigation__WEBPACK_IMPORTED_MODULE_14__.useRouter)();\n    var user = (0,_hooks_useAuthContext__WEBPACK_IMPORTED_MODULE_8__.useAuthContext)().user;\n    var _useState = (0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_15__._)((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), 2), isPending = _useState[0], setIsPending = _useState[1];\n    var getDocument = (0,_hooks_useRealtimeDocument__WEBPACK_IMPORTED_MODULE_12__[\"default\"])().getDocument;\n    var getDocuments = (0,_hooks_useRealtimeDocuments__WEBPACK_IMPORTED_MODULE_13__[\"default\"])().getDocuments;\n    var isDarkModed = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector)(function(state) {\n        return state.mode.isDarkMode;\n    });\n    var _useRealDatabase = (0,_hooks_useRealDatabase__WEBPACK_IMPORTED_MODULE_11__.useRealDatabase)(), removeFromDataBase = _useRealDatabase.removeFromDataBase, addToDataBase = _useRealDatabase.addToDataBase, updateDatabase = _useRealDatabase.updateDatabase;\n    var _useState1 = (0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_15__._)((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), 2), isLiked = _useState1[0], setIsLiked = _useState1[1];\n    var _useState2 = (0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_15__._)((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), 2), bookReaderForm = _useState2[0], setBookReaderForm = _useState2[1];\n    var _useState3 = (0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_15__._)((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), 2), updateReaderStatus = _useState3[0], setUpdateReaderStatus = _useState3[1];\n    var _useState4 = (0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_15__._)((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), 2), showLikers = _useState4[0], setShowLikers = _useState4[1];\n    var _useState5 = (0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_15__._)((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), 2), expanded = _useState5[0], setExpanded = _useState5[1];\n    var handleOpenAccord = function(panel) {\n        return function(event, isExpanded) {\n            setExpanded(isExpanded ? panel : false);\n        };\n    };\n    var showAllLikers = function() {\n        setShowLikers(true);\n    };\n    var hideAllLikers = function() {\n        setShowLikers(false);\n    };\n    var _useGetDocuments = (0,_hooks_useGetDocuments__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(\"lovedBooks\"), likers = _useGetDocuments.documents;\n    var _useGetDocuments1 = (0,_hooks_useGetDocuments__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(\"bookRecensions\"), recensionObjects = _useGetDocuments1.documents;\n    var recensions = recensionObjects.map(function(bookReader) {\n        if (bookReader.recensions) {\n            return bookReader.recensions;\n        } else {\n            return [];\n        }\n    }).map(function(obj) {\n        if (obj !== null && obj !== undefined) {\n            var nestedObject = Object.values(obj);\n            return nestedObject;\n        } else {\n            return;\n        }\n    }).flat();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    var showIfLiked = function() {\n        var _ref = (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_16__._)(function() {\n            var docElement;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_17__.__generator)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!user) return [\n                            3,\n                            2\n                        ];\n                        return [\n                            4,\n                            getDocument(\"lovedBooks\", \"\".concat(id, \"-\").concat(user.uid))\n                        ];\n                    case 1:\n                        docElement = _state.sent();\n                        if (docElement) {\n                            setIsLiked(true);\n                        } else {\n                            setIsLiked(false);\n                        }\n                        _state.label = 2;\n                    case 2:\n                        return [\n                            2\n                        ];\n                }\n            });\n        });\n        return function showIfLiked() {\n            return _ref.apply(this, arguments);\n        };\n    }();\n    var document = (0,_hooks_useGetDocument__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(\"books\", id).document;\n    var _useGetDocuments2 = (0,_hooks_useGetDocuments__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(\"bookReaders\"), readersObjects = _useGetDocuments2.documents;\n    var readers = readersObjects.map(function(bookReader) {\n        return bookReader.readers;\n    }).map(function(obj) {\n        var nestedObject = Object.values(obj);\n        return nestedObject;\n    }).flat();\n    var publishRecension = function(recension, bookRate) {\n        if (user) {\n            if (recension.trim(\"\").length < 10) {\n                dispatch(_context_SnackBarContext__WEBPACK_IMPORTED_MODULE_7__.snackbarActions.showMessage({\n                    message: \"\".concat(_assets_translations_AlertMessages_json__WEBPACK_IMPORTED_MODULE_5__.notifications.wrong.recensionLonger[selectedLanguage]),\n                    alertType: \"error\"\n                }));\n                return;\n            }\n            addToDataBase(\"bookRecensions\", \"\".concat(id, \"/recensions/\").concat(user.uid), {\n                recensionedBook: id,\n                bookRate: bookRate,\n                recension: recension,\n                displayName: user.displayName,\n                email: user.email,\n                id: user.uid,\n                photoURL: user.photoURL,\n                dateOfFinish: new Date().getTime()\n            });\n            var readerObject = readers.find(function(reader) {\n                return reader.id === user.uid && reader.bookReadingId === id;\n            });\n            updateDatabase((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_18__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_19__._)({}, readerObject), {\n                recension: recension\n            }), \"bookReaders\", \"\".concat(id, \"/readers/\").concat(user.uid));\n        }\n    };\n    var _useGetDocuments3 = (0,_hooks_useGetDocuments__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(\"communityMembers\"), membersObjects = _useGetDocuments3.documents;\n    var competitionsMembers = membersObjects.map(function(communityMember) {\n        return communityMember.users;\n    }).map(function(member) {\n        return Object.values(member);\n    }).flat();\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function() {\n        showIfLiked();\n    }, [\n        showIfLiked\n    ]);\n    var selectedLanguage = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector)(function(state) {\n        return state.languageSelection.selectedLangugage;\n    });\n    var getCompetitionMembers = function() {\n        if (user) {\n            var _loop = function() {\n                var currentCompetition = userCompetitions.pop();\n                if (!visitedCompetitions.includes(currentCompetition)) {\n                    var _userCompetitions;\n                    var membersInCurrentCompetition = competitionsMembers.filter(function(member) {\n                        return member.belongsTo === currentCompetition;\n                    });\n                    result = result.concat(membersInCurrentCompetition);\n                    var newMembersCompetitions = membersInCurrentCompetition.filter(function(member) {\n                        return !visitedCompetitions.includes(member.belongsTo);\n                    }).map(function(member) {\n                        return member.belongsTo;\n                    });\n                    (_userCompetitions = userCompetitions).push.apply(_userCompetitions, (0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_20__._)(newMembersCompetitions));\n                    visitedCompetitions.push(currentCompetition);\n                }\n            };\n            var userCompetitions = competitionsMembers.filter(function(doc) {\n                return doc.value.id === user.uid;\n            }).map(function(communityMember) {\n                return communityMember.belongsTo;\n            });\n            var result = [];\n            var visitedCompetitions = [];\n            while(userCompetitions.length > 0)_loop();\n            result = result.filter(function(value, index, self) {\n                return self.findIndex(function(m) {\n                    return m.value.id === value.value.id;\n                }) === index;\n            });\n            return result.filter(function(member) {\n                return member.value.id !== user.uid;\n            });\n        }\n    };\n    var changeLoveState = function() {\n        var _ref = (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_16__._)(function() {\n            var likerDoc;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_17__.__generator)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!user) return [\n                            3,\n                            2\n                        ];\n                        return [\n                            4,\n                            getDocument(\"lovedBooks\", \"\".concat(id, \"-\").concat(user.uid))\n                        ];\n                    case 1:\n                        likerDoc = _state.sent();\n                        if (!likerDoc) {\n                            addToDataBase(\"lovedBooks\", \"\".concat(id, \"-\").concat(user.uid), {\n                                displayName: user.displayName,\n                                lovedBookId: id,\n                                lovedBy: user.uid,\n                                photoURL: user.photoURL\n                            });\n                            getDocument(\"likesData\", id).then(function(data) {\n                                updateDatabase({\n                                    likesAmount: data.likesAmount + 1\n                                }, \"likesData\", id);\n                            });\n                        } else {\n                            removeFromDataBase(\"lovedBooks\", \"\".concat(id, \"-\").concat(user.uid));\n                            getDocument(\"likesData\", id).then(function(data) {\n                                updateDatabase({\n                                    likesAmount: data.likesAmount - 1\n                                }, \"likesData\", id);\n                            });\n                        }\n                        _state.label = 2;\n                    case 2:\n                        return [\n                            2\n                        ];\n                }\n            });\n        });\n        return function changeLoveState() {\n            return _ref.apply(this, arguments);\n        };\n    }();\n    var clickDelete = function() {\n        setIsPending(true);\n        removeFromDataBase(\"books\", id);\n        dispatch(_context_SnackBarContext__WEBPACK_IMPORTED_MODULE_7__.snackbarActions.showMessage({\n            message: \"\".concat(_assets_translations_AlertMessages_json__WEBPACK_IMPORTED_MODULE_5__.notifications.successfull.remove[selectedLanguage]),\n            alertType: \"success\"\n        }));\n        setIsPending(false);\n        navigate.push(\"/\");\n    };\n    var isOpened = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector)(function(state) {\n        return state.modal.isOpened;\n    });\n    var clipboard = (0,use_clipboard_copy__WEBPACK_IMPORTED_MODULE_4__.useClipboard)();\n    var copyPathName = function() {\n        clipboard.copy(window.location.href);\n        dispatch(_context_SnackBarContext__WEBPACK_IMPORTED_MODULE_7__.snackbarActions.showMessage({\n            message: \"\".concat(_assets_translations_AlertMessages_json__WEBPACK_IMPORTED_MODULE_5__.notifications.successfull.copied[selectedLanguage]),\n            alertType: \"success\"\n        }));\n    };\n    var openBookReaderForm = function() {\n        setBookReaderForm(true);\n    };\n    var openUpdateReaderForm = function() {\n        setUpdateReaderStatus(true);\n    };\n    var closeBookReaderForm = function() {\n        setBookReaderForm(false);\n    };\n    var closeUpdateReaderForm = function() {\n        setUpdateReaderStatus(false);\n    };\n    var removeFromShelf = function() {\n        if (user) {\n            if (readers.filter(function(doc) {\n                return doc.bookReadingId === id;\n            }).length === 1) {\n                removeFromDataBase(\"bookReaders\", \"\".concat(id));\n            } else {\n                removeFromDataBase(\"bookReaders\", \"\".concat(id, \"/readers/\").concat(user.uid));\n                removeFromDataBase(\"bookRecensions\", \"\".concat(id, \"/recensions/\").concat(user.uid));\n            }\n        }\n    };\n    var addToShelf = function(hasStarted, hasFinished, readPages) {\n        if (user) {\n            addToDataBase(\"bookReaders\", \"\".concat(id, \"/readers/\").concat(user.uid), {\n                bookRate: 0,\n                bookReadingId: id,\n                displayName: user.displayName,\n                email: user.email,\n                hasFinished: hasFinished,\n                id: user.uid,\n                pagesRead: readPages,\n                startedReading: hasStarted,\n                dateOfFinish: hasFinished ? new Date().getTime() : null,\n                recension: \"\",\n                photoURL: user.photoURL\n            });\n        }\n        var updateReaderState = function(hasStarted, hasFinished, readPages) {\n            if (user) {\n                if (document.pagesNumber > readPages) {\n                    removeFromDataBase(\"bookRecensions\", \"\".concat(id, \"/recensions/\").concat(user.uid));\n                }\n                addToDataBase(\"bookReaders\", \"\".concat(id, \"/readers/\").concat(user.uid), {\n                    bookRate: 0,\n                    bookReadingId: id,\n                    displayName: user.displayName,\n                    email: user.email,\n                    hasFinished: hasFinished,\n                    id: user.uid,\n                    pagesRead: readPages,\n                    startedReading: hasStarted,\n                    dateOfFinish: hasFinished ? new Date().getTime() : null,\n                    recension: \"\",\n                    photoURL: user.photoURL\n                });\n            }\n        };\n    };\n    var _useState6 = (0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_15__._)((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), 2), showList = _useState6[0], setShowList = _useState6[1];\n    var showListsOfUsers = function() {\n        setShowList(true);\n    };\n    var closeListsOfUsers = function() {\n        setShowList(false);\n    };\n    var recommendToUser = function() {\n        var _ref = (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_16__._)(function(receiverId) {\n            var firstPossibility, secondPossibility, existingChat1, existingChat2, chatId, messageId;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_17__.__generator)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!user) return [\n                            3,\n                            3\n                        ];\n                        firstPossibility = \"\".concat(user.uid, \"-\").concat(receiverId);\n                        secondPossibility = \"\".concat(receiverId, \"-\").concat(user.uid);\n                        return [\n                            4,\n                            getDocument(\"usersChats\", firstPossibility)\n                        ];\n                    case 1:\n                        existingChat1 = _state.sent();\n                        return [\n                            4,\n                            getDocument(\"usersChats\", secondPossibility)\n                        ];\n                    case 2:\n                        existingChat2 = _state.sent();\n                        if (existingChat1 || existingChat2) {\n                            chatId = existingChat1 ? firstPossibility : secondPossibility;\n                        } else {\n                            chatId = firstPossibility;\n                            addToDataBase(\"usersChats\", firstPossibility, {\n                                chatId: firstPossibility,\n                                createdAt: new Date().getTime()\n                            });\n                            addToDataBase(\"entitledToChat\", \"\".concat(firstPossibility, \"/\").concat(user.uid), {\n                                entitledUserId: user.uid,\n                                entitledChatId: firstPossibility\n                            });\n                            addToDataBase(\"entitledToChat\", \"\".concat(firstPossibility, \"/\").concat(receiverId), {\n                                entitledUserId: receiverId,\n                                entitledChatId: firstPossibility\n                            });\n                        }\n                        messageId = \"\".concat(chatId, \"/\").concat(new Date().getTime()).concat(uniqid__WEBPACK_IMPORTED_MODULE_3___default()());\n                        addToDataBase(\"usersChatMessages\", messageId, {\n                            content: document.photoURL,\n                            message: \"Hi, I want to recommend you the book \".concat(document.title, \" written by \").concat(document.author, \".\"),\n                            chatId: chatId,\n                            sender: {\n                                id: user.uid\n                            },\n                            receiver: {\n                                id: receiverId\n                            },\n                            sentAt: new Date().getTime()\n                        });\n                        addToDataBase(\"recommendations\", messageId, {\n                            content: document.photoURL,\n                            message: \"Hi, I want to recommend you the book \".concat(document.title, \" written by \").concat(document.author, \".\"),\n                            chatId: chatId,\n                            messageId: messageId,\n                            sender: {\n                                id: user.uid\n                            },\n                            receiver: {\n                                id: receiverId\n                            },\n                            sentAt: new Date().getTime()\n                        });\n                        dispatch(_context_SnackBarContext__WEBPACK_IMPORTED_MODULE_7__.snackbarActions.showMessage({\n                            message: \"\".concat(_assets_translations_AlertMessages_json__WEBPACK_IMPORTED_MODULE_5__.notifications.successfull.send[selectedLanguage]),\n                            alertType: \"success\"\n                        }));\n                        _state.label = 3;\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        });\n        return function recommendToUser(receiverId) {\n            return _ref.apply(this, arguments);\n        };\n    }();\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen h-full overflow-x-hidden\",\n        children: [\n            document && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex max-w-7xl mx-auto m-0 w-full\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex flex-col gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: document.title\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Pulpit\\\\BookFreak\\\\bookfreak-project\\\\app\\\\book\\\\[bookId]\\\\page.tsx\",\n                                lineNumber: 414,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex gap-4 items-center\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center gap-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_FaHeart_react_icons_fa__WEBPACK_IMPORTED_MODULE_21__.FaHeart, {}, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Pulpit\\\\BookFreak\\\\bookfreak-project\\\\app\\\\book\\\\[bookId]\\\\page.tsx\",\n                                                lineNumber: 418,\n                                                columnNumber: 21\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Pulpit\\\\BookFreak\\\\bookfreak-project\\\\app\\\\book\\\\[bookId]\\\\page.tsx\",\n                                            lineNumber: 417,\n                                            columnNumber: 19\n                                        }, this),\n                                        likers && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            children: JSON.stringify(likers.filter(function(item) {\n                                                return item.lovedBookId === id;\n                                            })[0])\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Pulpit\\\\BookFreak\\\\bookfreak-project\\\\app\\\\book\\\\[bookId]\\\\page.tsx\",\n                                            lineNumber: 420,\n                                            columnNumber: 30\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Pulpit\\\\BookFreak\\\\bookfreak-project\\\\app\\\\book\\\\[bookId]\\\\page.tsx\",\n                                    lineNumber: 416,\n                                    columnNumber: 17\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Pulpit\\\\BookFreak\\\\bookfreak-project\\\\app\\\\book\\\\[bookId]\\\\page.tsx\",\n                                lineNumber: 415,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Pulpit\\\\BookFreak\\\\bookfreak-project\\\\app\\\\book\\\\[bookId]\\\\page.tsx\",\n                        lineNumber: 413,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Pulpit\\\\BookFreak\\\\bookfreak-project\\\\app\\\\book\\\\[bookId]\\\\page.tsx\",\n                    lineNumber: 411,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false),\n            document && readers && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {}, void 0, false),\n            bookReaderForm && document && user && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {}, void 0, false),\n            updateReaderStatus && document && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {}, void 0, false),\n            showLikers && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {}, void 0, false),\n            isPending && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_Loader__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {}, void 0, false, {\n                fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Pulpit\\\\BookFreak\\\\bookfreak-project\\\\app\\\\book\\\\[bookId]\\\\page.tsx\",\n                lineNumber: 451,\n                columnNumber: 21\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Pulpit\\\\BookFreak\\\\bookfreak-project\\\\app\\\\book\\\\[bookId]\\\\page.tsx\",\n        lineNumber: 406,\n        columnNumber: 5\n    }, this);\n}\n_s(Book, \"oAKCgBy6mG54o6HpWJ5KMvOVkRk=\", false, function() {\n    return [\n        react_redux__WEBPACK_IMPORTED_MODULE_2__.useDispatch,\n        next_navigation__WEBPACK_IMPORTED_MODULE_14__.useRouter,\n        _hooks_useAuthContext__WEBPACK_IMPORTED_MODULE_8__.useAuthContext,\n        _hooks_useRealtimeDocument__WEBPACK_IMPORTED_MODULE_12__[\"default\"],\n        _hooks_useRealtimeDocuments__WEBPACK_IMPORTED_MODULE_13__[\"default\"],\n        react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector,\n        _hooks_useRealDatabase__WEBPACK_IMPORTED_MODULE_11__.useRealDatabase,\n        _hooks_useGetDocuments__WEBPACK_IMPORTED_MODULE_10__[\"default\"],\n        _hooks_useGetDocuments__WEBPACK_IMPORTED_MODULE_10__[\"default\"],\n        _hooks_useGetDocument__WEBPACK_IMPORTED_MODULE_9__[\"default\"],\n        _hooks_useGetDocuments__WEBPACK_IMPORTED_MODULE_10__[\"default\"],\n        _hooks_useGetDocuments__WEBPACK_IMPORTED_MODULE_10__[\"default\"],\n        react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector,\n        react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector,\n        use_clipboard_copy__WEBPACK_IMPORTED_MODULE_4__.useClipboard\n    ];\n});\n_c = Book;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Book);\nvar _c;\n$RefreshReg$(_c, \"Book\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9ib29rL1tib29rSWRdL3BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNZTtBQU9TO0FBS0g7QUFNTztBQUNzQjtBQUUwQjtBQU81RSw0QkFBNEI7QUFDNUIsb0VBQW9FO0FBQ3BCO0FBRW1CO0FBQ0o7QUFDSjtBQUNFO0FBQ0k7QUFDSTtBQUNFO0FBRzNCO0FBRTVDLFNBQVNpQixLQUFLLEtBQTBDO1FBQTFDLGVBQUVDOztJQUNkLElBQVFDLEtBQWVELE9BQWZDO0lBQ1IsSUFBTUUsV0FBU2xCLHdEQUFXQTtJQUMxQixJQUFNbUIsV0FBV04sMkRBQVNBO0lBQzFCLElBQU0sT0FBV04scUVBQWNBLEdBQXZCYTtJQUNSLElBQWtDdEIsWUFBQUEsZ0VBQUFBLENBQUFBLCtDQUFRQSxDQUFDLFlBQXBDdUIsWUFBMkJ2QixjQUFoQndCLGVBQWdCeEI7SUFDbEMsSUFBTSxjQUFrQmEsdUVBQW1CQSxHQUFuQ1k7SUFDUixJQUFNLGVBQW1CWCx3RUFBb0JBLEdBQXJDWTtJQUNSLElBQU1DLGNBQWN4Qix3REFBV0EsQ0FBQyxTQUFDeUI7ZUFBY0EsTUFBTUMsSUFBSSxDQUFDQyxVQUFVOztJQUNwRSxJQUNFbEIsbUJBQUFBLHdFQUFlQSxJQURUbUIscUJBQ05uQixpQkFETW1CLG9CQUFvQkMsZ0JBQzFCcEIsaUJBRDBCb0IsZUFBZUMsaUJBQ3pDckIsaUJBRHlDcUI7SUFFM0MsSUFBOEJqQyxhQUFBQSxnRUFBQUEsQ0FBQUEsK0NBQVFBLENBQUMsWUFBaENrQyxVQUF1QmxDLGVBQWRtQyxhQUFjbkM7SUFDOUIsSUFBNENBLGFBQUFBLGdFQUFBQSxDQUFBQSwrQ0FBUUEsQ0FBQyxZQUE5Q29DLGlCQUFxQ3BDLGVBQXJCcUMsb0JBQXFCckM7SUFDNUMsSUFBb0RBLGFBQUFBLGdFQUFBQSxDQUFBQSwrQ0FBUUEsQ0FBQyxZQUF0RHNDLHFCQUE2Q3RDLGVBQXpCdUMsd0JBQXlC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MENBQ2xCLDhEQUFDTTtnQ0FBSUMsV0FBVTswQ0FDYiw0RUFBQ0Q7b0NBQUlDLFdBQVU7O3NEQUNiLDhEQUFDRTtzREFDQyw0RUFBQzdLLG1GQUFPQTs7Ozs7Ozs7Ozt3Q0FFVGtELHdCQUFVLDhEQUFDMEg7c0RBQUdFLEtBQUtDLFNBQVMsQ0FBQzdILE9BQU9zRCxNQUFNLENBQUMsU0FBQ3dFO3VEQUFPQSxLQUFLMUQsV0FBVyxLQUFLcEc7OENBQUcsQ0FBQyxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztZQVExRjhDLFlBQWFFLHlCQUNYO1lBS0YvQixrQkFBa0I2QixZQUFZM0Msc0JBQzlCO1lBS0FnQixzQkFBc0IyQiwwQkFDeEI7WUFLRXpCLDRCQUNDO1lBSURqQiwyQkFBYSw4REFBQ2hCLDBEQUFNQTs7Ozs7Ozs7Ozs7QUFJM0I7R0FyWlNTOztRQUVRZCxvREFBV0E7UUFDVGEsdURBQVNBO1FBQ1ROLGlFQUFjQTtRQUVQSSxtRUFBbUJBO1FBQ2xCQyxvRUFBb0JBO1FBQ3pCWCxvREFBV0E7UUFFN0JTLG9FQUFlQTtRQWtCTUQsK0RBQWVBO1FBQ0pBLCtEQUFlQTtRQStCbENELDZEQUFjQTtRQUNJQywrREFBZUE7UUF5Q2RBLCtEQUFlQTtRQWV4QlIsb0RBQVdBO1FBd0ZuQkEsb0RBQVdBO1FBQ1ZFLDREQUFZQTs7O0tBOU12Qlc7QUF1WlQsK0RBQWVBLElBQUlBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vYXBwL2Jvb2svW2Jvb2tJZF0vcGFnZS50c3g/MDg0MyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XHJcblxyXG5cclxuaW1wb3J0IHtcclxuICB1c2VFZmZlY3QsXHJcbiAgdXNlU3RhdGUsXHJcbn0gZnJvbSAncmVhY3QnO1xyXG5cclxuaW1wb3J0IHtcclxuICBGYUhlYXJ0LFxyXG4gIEZhUGVuY2lsQWx0LFxyXG4gIEZhU2hhcmUsXHJcbiAgRmFUcmFzaCxcclxufSBmcm9tICdyZWFjdC1pY29ucy9mYSc7XHJcbmltcG9ydCB7IE1kUmVjb21tZW5kIH0gZnJvbSAncmVhY3QtaWNvbnMvbWQnO1xyXG5pbXBvcnQge1xyXG4gIHVzZURpc3BhdGNoLFxyXG4gIHVzZVNlbGVjdG9yLFxyXG59IGZyb20gJ3JlYWN0LXJlZHV4JztcclxuaW1wb3J0IHtcclxuICB1c2VOYXZpZ2F0ZSxcclxuICB1c2VQYXJhbXMsXHJcbn0gZnJvbSAncmVhY3Qtcm91dGVyJztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgdW5pcWlkIGZyb20gJ3VuaXFpZCc7XHJcbmltcG9ydCB7IHVzZUNsaXBib2FyZCB9IGZyb20gJ3VzZS1jbGlwYm9hcmQtY29weSc7XHJcblxyXG5pbXBvcnQgYWxlcnRNZXNzYWdlcyBmcm9tICcuLi8uLi8uLi9hc3NldHMvdHJhbnNsYXRpb25zL0FsZXJ0TWVzc2FnZXMuanNvbic7XHJcbmltcG9ydCB0cmFuc2xhdGlvbnMgZnJvbSAnLi4vLi4vLi4vYXNzZXRzL3RyYW5zbGF0aW9ucy9Cb29rUGFnZVRyYW5zbGF0aW9ucy5qc29uJztcclxuaW1wb3J0IHJldXNlYWJsZVRyYW5zbGF0aW9uc1xyXG4gIGZyb20gJy4uLy4uLy4uL2Fzc2V0cy90cmFuc2xhdGlvbnMvUmV1c2FibGVUcmFuc2xhdGlvbnMuanNvbic7XHJcbmltcG9ydCBCb29rUmVhZGVyRm9ybSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL2Jvb2svQm9va1JlYWRlckZvcm0nO1xyXG5pbXBvcnQgTGlrZXJzTGlzdCBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL2Jvb2svTGlrZXJzTGlzdCc7XHJcbmltcG9ydCBSZWNlbnNpb25zRm9yQm9vayBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL2Jvb2svUmVjZW5zaW9uc0ZvckJvb2snO1xyXG4vLyBpbXBvcnQgQ29tcGV0aXRpb25NZW1iZXJzXHJcbi8vICAgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Db21tdW5pdHlDb21wb25lbnRzL0NvbXBldGl0aW9uTWVtYmVycyc7XHJcbmltcG9ydCBMb2FkZXIgZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9Mb2FkZXInO1xyXG5pbXBvcnQgeyBtb2RhbEFjdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9jb250ZXh0L01vZGFsQ29udGV4dCc7XHJcbmltcG9ydCB7IHNuYWNrYmFyQWN0aW9ucyB9IGZyb20gJy4uLy4uLy4uL2NvbnRleHQvU25hY2tCYXJDb250ZXh0JztcclxuaW1wb3J0IHsgdXNlQXV0aENvbnRleHQgfSBmcm9tICcuLi8uLi8uLi9ob29rcy91c2VBdXRoQ29udGV4dCc7XHJcbmltcG9ydCB1c2VHZXREb2N1bWVudCBmcm9tICcuLi8uLi8uLi9ob29rcy91c2VHZXREb2N1bWVudCc7XHJcbmltcG9ydCB1c2VHZXREb2N1bWVudHMgZnJvbSAnLi4vLi4vLi4vaG9va3MvdXNlR2V0RG9jdW1lbnRzJztcclxuaW1wb3J0IHsgdXNlUmVhbERhdGFiYXNlIH0gZnJvbSAnLi4vLi4vLi4vaG9va3MvdXNlUmVhbERhdGFiYXNlJztcclxuaW1wb3J0IHVzZVJlYWx0aW1lRG9jdW1lbnQgZnJvbSAnLi4vLi4vLi4vaG9va3MvdXNlUmVhbHRpbWVEb2N1bWVudCc7XHJcbmltcG9ydCB1c2VSZWFsdGltZURvY3VtZW50cyBmcm9tICcuLi8uLi8uLi9ob29rcy91c2VSZWFsdGltZURvY3VtZW50cyc7XHJcbi8vIGltcG9ydCBFZGl0Qm9vayBmcm9tICcuLi9Gb3JtcyZGb3Jtc1BhZ2VzL0VkaXRCb29rJztcclxuaW1wb3J0IEltYWdlIGZyb20gJ25leHQvaW1hZ2UnO1xyXG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L25hdmlnYXRpb24nO1xyXG5cclxuZnVuY3Rpb24gQm9vayh7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBib29rSWQ6IHN0cmluZyB9IH0pIHtcclxuICBjb25zdCB7IGJvb2tJZDogaWQgfSA9IHBhcmFtcztcclxuICBjb25zdCBkaXNwYXRjaD11c2VEaXNwYXRjaCgpO1xyXG4gIGNvbnN0IG5hdmlnYXRlID0gdXNlUm91dGVyKCk7XHJcbiAgY29uc3QgeyB1c2VyIH0gPSB1c2VBdXRoQ29udGV4dCgpO1xyXG4gIGNvbnN0IFtpc1BlbmRpbmcsIHNldElzUGVuZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgeyBnZXREb2N1bWVudCB9ID0gdXNlUmVhbHRpbWVEb2N1bWVudCgpO1xyXG4gIGNvbnN0IHsgZ2V0RG9jdW1lbnRzIH0gPSB1c2VSZWFsdGltZURvY3VtZW50cygpO1xyXG4gIGNvbnN0IGlzRGFya01vZGVkID0gdXNlU2VsZWN0b3IoKHN0YXRlOmFueSkgPT4gc3RhdGUubW9kZS5pc0RhcmtNb2RlKTtcclxuICBjb25zdCB7IHJlbW92ZUZyb21EYXRhQmFzZSwgYWRkVG9EYXRhQmFzZSwgdXBkYXRlRGF0YWJhc2UgfSA9XHJcbiAgICB1c2VSZWFsRGF0YWJhc2UoKTtcclxuICBjb25zdCBbaXNMaWtlZCwgc2V0SXNMaWtlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW2Jvb2tSZWFkZXJGb3JtLCBzZXRCb29rUmVhZGVyRm9ybV0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW3VwZGF0ZVJlYWRlclN0YXR1cywgc2V0VXBkYXRlUmVhZGVyU3RhdHVzXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbc2hvd0xpa2Vycywgc2V0U2hvd0xpa2Vyc10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW2V4cGFuZGVkLCBzZXRFeHBhbmRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZU9wZW5BY2NvcmQgPSAocGFuZWwpID0+IChldmVudCwgaXNFeHBhbmRlZCkgPT4ge1xyXG4gICAgc2V0RXhwYW5kZWQoaXNFeHBhbmRlZCA/IHBhbmVsIDogZmFsc2UpO1xyXG4gIH07XHJcbiAgY29uc3Qgc2hvd0FsbExpa2VycyA9ICgpID0+IHtcclxuICAgIHNldFNob3dMaWtlcnModHJ1ZSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGlkZUFsbExpa2VycyA9ICgpID0+IHtcclxuICAgIHNldFNob3dMaWtlcnMoZmFsc2UpO1xyXG4gIH07XHJcblxyXG5jb25zdCB7ZG9jdW1lbnRzOmxpa2Vyc309dXNlR2V0RG9jdW1lbnRzKFwibG92ZWRCb29rc1wiKTtcclxuY29uc3Qge2RvY3VtZW50czogcmVjZW5zaW9uT2JqZWN0c309dXNlR2V0RG9jdW1lbnRzKCdib29rUmVjZW5zaW9ucycpO1xyXG5cclxuY29uc3QgcmVjZW5zaW9ucz0gcmVjZW5zaW9uT2JqZWN0cy5tYXAoKGJvb2tSZWFkZXIpID0+IHtcclxuICBpZiAoYm9va1JlYWRlci5yZWNlbnNpb25zKSB7XHJcbiAgICByZXR1cm4gYm9va1JlYWRlci5yZWNlbnNpb25zO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG59KS5tYXAoKG9iaikgPT4ge1xyXG4gIGlmIChvYmogIT09IG51bGwgJiYgb2JqICE9PSB1bmRlZmluZWQpIHtcclxuICAgIGNvbnN0IG5lc3RlZE9iamVjdCA9IE9iamVjdC52YWx1ZXMob2JqKTtcclxuICAgIHJldHVybiBuZXN0ZWRPYmplY3Q7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbn0pLmZsYXQoKTtcclxuXHJcbiBcclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXHJcbiAgY29uc3Qgc2hvd0lmTGlrZWQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAodXNlcikgeyAgICAgIFxyXG4gICAgICBjb25zdCBkb2NFbGVtZW50ID0gYXdhaXQgZ2V0RG9jdW1lbnQoXCJsb3ZlZEJvb2tzXCIsIGAke2lkfS0ke3VzZXIudWlkfWApO1xyXG4gIFxyXG4gICAgICBpZiAoZG9jRWxlbWVudCkge1xyXG4gICAgICAgIHNldElzTGlrZWQodHJ1ZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2V0SXNMaWtlZChmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuY29uc3Qge2RvY3VtZW50fT11c2VHZXREb2N1bWVudCgnYm9va3MnLCBpZCk7XHJcbiAgY29uc3Qge2RvY3VtZW50czpyZWFkZXJzT2JqZWN0c309dXNlR2V0RG9jdW1lbnRzKFwiYm9va1JlYWRlcnNcIik7XHJcblxyXG4gIGNvbnN0IHJlYWRlcnM9cmVhZGVyc09iamVjdHMubWFwKChib29rUmVhZGVyOmFueSkgPT4ge1xyXG4gICAgcmV0dXJuIGJvb2tSZWFkZXIucmVhZGVycztcclxuICB9KS5tYXAoKG9iajphbnlbXSkgPT4ge1xyXG4gICAgY29uc3QgbmVzdGVkT2JqZWN0ID0gT2JqZWN0LnZhbHVlcyhvYmopO1xyXG4gICAgcmV0dXJuIG5lc3RlZE9iamVjdDtcclxuICB9KS5mbGF0KCk7XHJcblxyXG4gXHJcbiAgY29uc3QgcHVibGlzaFJlY2Vuc2lvbiA9IChyZWNlbnNpb24sIGJvb2tSYXRlKSA9PiB7XHJcbiAgICBpZiAodXNlcikge1xyXG4gICAgICBpZiAocmVjZW5zaW9uLnRyaW0oXCJcIikubGVuZ3RoIDwgMTApIHtcclxuICAgICAgICBkaXNwYXRjaChzbmFja2JhckFjdGlvbnMuc2hvd01lc3NhZ2Uoe21lc3NhZ2U6YCR7YWxlcnRNZXNzYWdlcy5ub3RpZmljYXRpb25zLndyb25nLnJlY2Vuc2lvbkxvbmdlcltzZWxlY3RlZExhbmd1YWdlXX1gLCBhbGVydFR5cGU6XCJlcnJvclwifSkpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICBhZGRUb0RhdGFCYXNlKFwiYm9va1JlY2Vuc2lvbnNcIiwgYCR7aWR9L3JlY2Vuc2lvbnMvJHt1c2VyLnVpZH1gLCB7XHJcbiAgICAgICAgcmVjZW5zaW9uZWRCb29rOiBpZCxcclxuICAgICAgICBib29rUmF0ZTogYm9va1JhdGUsXHJcbiAgICAgICAgcmVjZW5zaW9uOiByZWNlbnNpb24sXHJcbiAgICAgICAgZGlzcGxheU5hbWU6IHVzZXIuZGlzcGxheU5hbWUsXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgaWQ6IHVzZXIudWlkLFxyXG4gICAgICAgIHBob3RvVVJMOiB1c2VyLnBob3RvVVJMLFxyXG4gICAgICAgIGRhdGVPZkZpbmlzaDogbmV3IERhdGUoKS5nZXRUaW1lKCksXHJcbiAgICAgIH0pO1xyXG4gIFxyXG4gICAgICBjb25zdCByZWFkZXJPYmplY3QgPSByZWFkZXJzLmZpbmQoXHJcbiAgICAgICAgKHJlYWRlcjphbnkpID0+IHJlYWRlci5pZCA9PT0gdXNlci51aWQgJiYgcmVhZGVyLmJvb2tSZWFkaW5nSWQgPT09IGlkXHJcbiAgICAgICk7XHJcbiAgXHJcbiAgICAgIHVwZGF0ZURhdGFiYXNlKFxyXG4gICAgICAgIHsgLi4uKHJlYWRlck9iamVjdCBhcyBhbnkpLCByZWNlbnNpb246IHJlY2Vuc2lvbiB9LFxyXG4gICAgICAgIFwiYm9va1JlYWRlcnNcIixcclxuICAgICAgICBgJHtpZH0vcmVhZGVycy8ke3VzZXIudWlkfWBcclxuICAgICAgKTtcclxuIH1cclxuICB9O1xyXG5cclxuXHJcbiAgY29uc3Qge2RvY3VtZW50czogbWVtYmVyc09iamVjdHN9PXVzZUdldERvY3VtZW50cygnY29tbXVuaXR5TWVtYmVycycpO1xyXG4gIGNvbnN0IGNvbXBldGl0aW9uc01lbWJlcnM9IG1lbWJlcnNPYmplY3RzLm1hcCgoY29tbXVuaXR5TWVtYmVyKSA9PiB7XHJcbiAgICByZXR1cm4gY29tbXVuaXR5TWVtYmVyLnVzZXJzO1xyXG4gIH0pLm1hcCgobWVtYmVyKSA9PiB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhtZW1iZXIpO1xyXG4gIH0pLmZsYXQoKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHNob3dJZkxpa2VkKCk7XHJcblxyXG47XHJcbiAgfSwgW1xyXG4gICAgc2hvd0lmTGlrZWQsXHJcbiAgXSk7XHJcblxyXG4gIGNvbnN0IHNlbGVjdGVkTGFuZ3VhZ2UgPSB1c2VTZWxlY3RvcihcclxuICAgIChzdGF0ZTphbnkpID0+IHN0YXRlLmxhbmd1YWdlU2VsZWN0aW9uLnNlbGVjdGVkTGFuZ3VnYWdlXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgZ2V0Q29tcGV0aXRpb25NZW1iZXJzID0gKCkgPT4ge1xyXG4gICAgaWYgKHVzZXIpIHsgXHJcbiAgICAgICBjb25zdCB1c2VyQ29tcGV0aXRpb25zID0gY29tcGV0aXRpb25zTWVtYmVyc1xyXG4gICAgICAuZmlsdGVyKChkb2M6YW55KSA9PiBkb2MudmFsdWUuaWQgPT09IHVzZXIudWlkKVxyXG4gICAgICAubWFwKChjb21tdW5pdHlNZW1iZXI6YW55KSA9PiBjb21tdW5pdHlNZW1iZXIuYmVsb25nc1RvKTtcclxuXHJcbiAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICBsZXQgdmlzaXRlZENvbXBldGl0aW9uczphbnlbXSA9IFtdO1xyXG5cclxuICAgIHdoaWxlICh1c2VyQ29tcGV0aXRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgY3VycmVudENvbXBldGl0aW9uID0gdXNlckNvbXBldGl0aW9ucy5wb3AoKTtcclxuXHJcbiAgICAgIGlmICghdmlzaXRlZENvbXBldGl0aW9ucy5pbmNsdWRlcyhjdXJyZW50Q29tcGV0aXRpb24pKSB7XHJcbiAgICAgICAgY29uc3QgbWVtYmVyc0luQ3VycmVudENvbXBldGl0aW9uID0gY29tcGV0aXRpb25zTWVtYmVycy5maWx0ZXIoXHJcbiAgICAgICAgICAobWVtYmVyOmFueSkgPT4gbWVtYmVyLmJlbG9uZ3NUbyA9PT0gY3VycmVudENvbXBldGl0aW9uXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChtZW1iZXJzSW5DdXJyZW50Q29tcGV0aXRpb24gYXMgYW55KTtcclxuXHJcbiAgICAgICAgY29uc3QgbmV3TWVtYmVyc0NvbXBldGl0aW9ucyA9IG1lbWJlcnNJbkN1cnJlbnRDb21wZXRpdGlvblxyXG4gICAgICAgICAgLmZpbHRlcigobWVtYmVyOmFueSkgPT4gIXZpc2l0ZWRDb21wZXRpdGlvbnMuaW5jbHVkZXMobWVtYmVyLmJlbG9uZ3NUbykpXHJcbiAgICAgICAgICAubWFwKChtZW1iZXI6YW55KSA9PiBtZW1iZXIuYmVsb25nc1RvKTtcclxuXHJcbiAgICAgICAgdXNlckNvbXBldGl0aW9ucy5wdXNoKC4uLm5ld01lbWJlcnNDb21wZXRpdGlvbnMpO1xyXG4gICAgICAgIHZpc2l0ZWRDb21wZXRpdGlvbnMucHVzaChjdXJyZW50Q29tcGV0aXRpb24pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcihcclxuICAgICAgKHZhbHVlOmFueSwgaW5kZXgsIHNlbGYpID0+XHJcbiAgICAgICAgc2VsZi5maW5kSW5kZXgoKG06YW55KSA9PiBtLnZhbHVlLmlkID09PSB2YWx1ZS52YWx1ZS5pZCkgPT09IGluZGV4XHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiByZXN1bHQuZmlsdGVyKChtZW1iZXI6YW55KSA9PiBtZW1iZXIudmFsdWUuaWQgIT09IHVzZXIudWlkKTtcclxuICAgIH1cclxuICAgXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY2hhbmdlTG92ZVN0YXRlID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKHVzZXIpIHtcclxuICAgICAgIGNvbnN0IGxpa2VyRG9jID0gYXdhaXQgZ2V0RG9jdW1lbnQoXCJsb3ZlZEJvb2tzXCIsIGAke2lkfS0ke3VzZXIudWlkfWApO1xyXG5cclxuICAgIGlmICghbGlrZXJEb2MpIHtcclxuICAgICAgYWRkVG9EYXRhQmFzZShcImxvdmVkQm9va3NcIiwgYCR7aWR9LSR7dXNlci51aWR9YCwge1xyXG4gICAgICAgIGRpc3BsYXlOYW1lOiB1c2VyLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgIGxvdmVkQm9va0lkOiBpZCxcclxuICAgICAgICBsb3ZlZEJ5OiB1c2VyLnVpZCxcclxuICAgICAgICBwaG90b1VSTDogdXNlci5waG90b1VSTCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBnZXREb2N1bWVudChcImxpa2VzRGF0YVwiLCBpZCkudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIHVwZGF0ZURhdGFiYXNlKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBsaWtlc0Ftb3VudDogZGF0YS5saWtlc0Ftb3VudCArIDEsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgXCJsaWtlc0RhdGFcIixcclxuICAgICAgICAgIGlkXHJcbiAgICAgICAgKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZW1vdmVGcm9tRGF0YUJhc2UoXCJsb3ZlZEJvb2tzXCIsIGAke2lkfS0ke3VzZXIudWlkfWApO1xyXG4gICAgICBnZXREb2N1bWVudChcImxpa2VzRGF0YVwiLCBpZCkudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIHVwZGF0ZURhdGFiYXNlKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBsaWtlc0Ftb3VudDogZGF0YS5saWtlc0Ftb3VudCAtIDEsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgXCJsaWtlc0RhdGFcIixcclxuICAgICAgICAgIGlkXHJcbiAgICAgICAgKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB9XHJcbiAgIFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNsaWNrRGVsZXRlID0gKCkgPT4ge1xyXG4gICAgc2V0SXNQZW5kaW5nKHRydWUpO1xyXG5cclxuICAgIHJlbW92ZUZyb21EYXRhQmFzZShcImJvb2tzXCIsIGlkKTtcclxuZGlzcGF0Y2goc25hY2tiYXJBY3Rpb25zLnNob3dNZXNzYWdlKHttZXNzYWdlOmAkeyAgYWxlcnRNZXNzYWdlcy5ub3RpZmljYXRpb25zLnN1Y2Nlc3NmdWxsLnJlbW92ZVtzZWxlY3RlZExhbmd1YWdlXX1gLCBhbGVydFR5cGU6XCJzdWNjZXNzXCJ9KSk7XHJcbiAgICBzZXRJc1BlbmRpbmcoZmFsc2UpO1xyXG4gICAgbmF2aWdhdGUucHVzaChcIi9cIik7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaXNPcGVuZWQgPSB1c2VTZWxlY3Rvcigoc3RhdGU6YW55KSA9PiBzdGF0ZS5tb2RhbC5pc09wZW5lZCk7XHJcbiAgY29uc3QgY2xpcGJvYXJkID0gdXNlQ2xpcGJvYXJkKCk7XHJcblxyXG4gIGNvbnN0IGNvcHlQYXRoTmFtZSA9ICgpID0+IHtcclxuICAgIGNsaXBib2FyZC5jb3B5KHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcclxuICAgIGRpc3BhdGNoKHNuYWNrYmFyQWN0aW9ucy5zaG93TWVzc2FnZSh7bWVzc2FnZTpgJHthbGVydE1lc3NhZ2VzLm5vdGlmaWNhdGlvbnMuc3VjY2Vzc2Z1bGwuY29waWVkW3NlbGVjdGVkTGFuZ3VhZ2VdfWAsIGFsZXJ0VHlwZTpcInN1Y2Nlc3NcIn0pKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBvcGVuQm9va1JlYWRlckZvcm0gPSAoKSA9PiB7XHJcbiAgICBzZXRCb29rUmVhZGVyRm9ybSh0cnVlKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBvcGVuVXBkYXRlUmVhZGVyRm9ybSA9ICgpID0+IHtcclxuICAgIHNldFVwZGF0ZVJlYWRlclN0YXR1cyh0cnVlKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBjbG9zZUJvb2tSZWFkZXJGb3JtID0gKCkgPT4ge1xyXG4gICAgc2V0Qm9va1JlYWRlckZvcm0oZmFsc2UpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNsb3NlVXBkYXRlUmVhZGVyRm9ybSA9ICgpID0+IHtcclxuICAgIHNldFVwZGF0ZVJlYWRlclN0YXR1cyhmYWxzZSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVtb3ZlRnJvbVNoZWxmID0gKCkgPT4ge1xyXG4gICAgaWYgKHVzZXIpIHtcclxuICAgICAgaWYocmVhZGVycy5maWx0ZXIoKGRvYzphbnkpPT5kb2MuYm9va1JlYWRpbmdJZD09PWlkKS5sZW5ndGggPT09IDEpe1xyXG4gICAgICAgIHJlbW92ZUZyb21EYXRhQmFzZShgYm9va1JlYWRlcnNgLCBgJHtpZH1gKTtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgcmVtb3ZlRnJvbURhdGFCYXNlKGBib29rUmVhZGVyc2AsIGAke2lkfS9yZWFkZXJzLyR7dXNlci51aWR9YCk7XHJcbiAgICAgICAgcmVtb3ZlRnJvbURhdGFCYXNlKGBib29rUmVjZW5zaW9uc2AsIGAke2lkfS9yZWNlbnNpb25zLyR7dXNlci51aWR9YCk7XHJcbiAgICAgIFxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGFkZFRvU2hlbGYgPSAoaGFzU3RhcnRlZCwgaGFzRmluaXNoZWQsIHJlYWRQYWdlcykgPT4ge1xyXG4gICAgaWYgKHVzZXIpIHsgXHJcbiAgICAgICAgIGFkZFRvRGF0YUJhc2UoXCJib29rUmVhZGVyc1wiLCBgJHtpZH0vcmVhZGVycy8ke3VzZXIudWlkfWAsIHtcclxuICAgICAgYm9va1JhdGU6IDAsXHJcbiAgICAgIGJvb2tSZWFkaW5nSWQ6IGlkLFxyXG4gICAgICBkaXNwbGF5TmFtZTogdXNlci5kaXNwbGF5TmFtZSxcclxuICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgIGhhc0ZpbmlzaGVkLFxyXG4gICAgICBpZDogdXNlci51aWQsXHJcbiAgICAgIHBhZ2VzUmVhZDogcmVhZFBhZ2VzLFxyXG4gICAgICBzdGFydGVkUmVhZGluZzogaGFzU3RhcnRlZCxcclxuICAgICAgZGF0ZU9mRmluaXNoOiBoYXNGaW5pc2hlZCA/IG5ldyBEYXRlKCkuZ2V0VGltZSgpIDogbnVsbCxcclxuICAgICAgcmVjZW5zaW9uOiBcIlwiLFxyXG4gICAgICBwaG90b1VSTDogdXNlci5waG90b1VSTCxcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICAgY29uc3QgdXBkYXRlUmVhZGVyU3RhdGUgPSAoaGFzU3RhcnRlZCwgaGFzRmluaXNoZWQsIHJlYWRQYWdlcykgPT4ge1xyXG4gICAgICBpZiAodXNlcikgeyAgIFxyXG4gICAgICAgIGlmIChkb2N1bWVudC5wYWdlc051bWJlciA+IHJlYWRQYWdlcykge1xyXG4gICAgICAgICAgcmVtb3ZlRnJvbURhdGFCYXNlKGBib29rUmVjZW5zaW9uc2AsIGAke2lkfS9yZWNlbnNpb25zLyR7dXNlci51aWR9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgYWRkVG9EYXRhQmFzZShcImJvb2tSZWFkZXJzXCIsIGAke2lkfS9yZWFkZXJzLyR7dXNlci51aWR9YCwge1xyXG4gICAgICAgICAgYm9va1JhdGU6IDAsXHJcbiAgICAgICAgICBib29rUmVhZGluZ0lkOiBpZCxcclxuICAgICAgICAgIGRpc3BsYXlOYW1lOiB1c2VyLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgICBoYXNGaW5pc2hlZCxcclxuICAgICAgICAgIGlkOiB1c2VyLnVpZCxcclxuICAgICAgICAgIHBhZ2VzUmVhZDogcmVhZFBhZ2VzLFxyXG4gICAgICAgICAgc3RhcnRlZFJlYWRpbmc6IGhhc1N0YXJ0ZWQsXHJcbiAgICAgICAgICBkYXRlT2ZGaW5pc2g6IGhhc0ZpbmlzaGVkID8gbmV3IERhdGUoKS5nZXRUaW1lKCkgOiBudWxsLFxyXG4gICAgICAgICAgcmVjZW5zaW9uOiBcIlwiLFxyXG4gICAgICAgICAgcGhvdG9VUkw6IHVzZXIucGhvdG9VUkwsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgW3Nob3dMaXN0LCBzZXRTaG93TGlzdF0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3Qgc2hvd0xpc3RzT2ZVc2VycyA9ICgpID0+IHtcclxuICAgIHNldFNob3dMaXN0KHRydWUpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNsb3NlTGlzdHNPZlVzZXJzID0gKCkgPT4ge1xyXG4gICAgc2V0U2hvd0xpc3QoZmFsc2UpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHJlY29tbWVuZFRvVXNlciA9IGFzeW5jIChyZWNlaXZlcklkOiBzdHJpbmcpID0+IHtcclxuICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICBjb25zdCBmaXJzdFBvc3NpYmlsaXR5ID0gYCR7dXNlci51aWR9LSR7cmVjZWl2ZXJJZH1gO1xyXG4gICAgY29uc3Qgc2Vjb25kUG9zc2liaWxpdHkgPSBgJHtyZWNlaXZlcklkfS0ke3VzZXIudWlkfWA7XHJcblxyXG4gICAgY29uc3QgZXhpc3RpbmdDaGF0MSA9IGF3YWl0IGdldERvY3VtZW50KFwidXNlcnNDaGF0c1wiLCBmaXJzdFBvc3NpYmlsaXR5KTtcclxuICAgIGNvbnN0IGV4aXN0aW5nQ2hhdDIgPSBhd2FpdCBnZXREb2N1bWVudChcInVzZXJzQ2hhdHNcIiwgc2Vjb25kUG9zc2liaWxpdHkpO1xyXG5cclxuICAgIGxldCBjaGF0SWQ7XHJcblxyXG4gICAgaWYgKGV4aXN0aW5nQ2hhdDEgfHwgZXhpc3RpbmdDaGF0Mikge1xyXG4gICAgICBjaGF0SWQgPSBleGlzdGluZ0NoYXQxID8gZmlyc3RQb3NzaWJpbGl0eSA6IHNlY29uZFBvc3NpYmlsaXR5O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2hhdElkID0gZmlyc3RQb3NzaWJpbGl0eTtcclxuXHJcbiAgICAgIGFkZFRvRGF0YUJhc2UoXCJ1c2Vyc0NoYXRzXCIsIGZpcnN0UG9zc2liaWxpdHksIHtcclxuICAgICAgICBjaGF0SWQ6IGZpcnN0UG9zc2liaWxpdHksXHJcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhZGRUb0RhdGFCYXNlKFwiZW50aXRsZWRUb0NoYXRcIiwgYCR7Zmlyc3RQb3NzaWJpbGl0eX0vJHt1c2VyLnVpZH1gLCB7XHJcbiAgICAgICAgZW50aXRsZWRVc2VySWQ6IHVzZXIudWlkLFxyXG4gICAgICAgIGVudGl0bGVkQ2hhdElkOiBmaXJzdFBvc3NpYmlsaXR5LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGFkZFRvRGF0YUJhc2UoXCJlbnRpdGxlZFRvQ2hhdFwiLCBgJHtmaXJzdFBvc3NpYmlsaXR5fS8ke3JlY2VpdmVySWR9YCwge1xyXG4gICAgICAgIGVudGl0bGVkVXNlcklkOiByZWNlaXZlcklkLFxyXG4gICAgICAgIGVudGl0bGVkQ2hhdElkOiBmaXJzdFBvc3NpYmlsaXR5LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgXHJcbiAgICBjb25zdCBtZXNzYWdlSWQgPSBgJHtjaGF0SWR9LyR7bmV3IERhdGUoKS5nZXRUaW1lKCl9JHt1bmlxaWQoKX1gO1xyXG5cclxuICAgIGFkZFRvRGF0YUJhc2UoXCJ1c2Vyc0NoYXRNZXNzYWdlc1wiLCBtZXNzYWdlSWQsIHtcclxuICAgICAgY29udGVudDogZG9jdW1lbnQucGhvdG9VUkwsXHJcbiAgICAgIG1lc3NhZ2U6IGBIaSwgSSB3YW50IHRvIHJlY29tbWVuZCB5b3UgdGhlIGJvb2sgJHtkb2N1bWVudC50aXRsZX0gd3JpdHRlbiBieSAke2RvY3VtZW50LmF1dGhvcn0uYCxcclxuICAgICAgY2hhdElkOiBjaGF0SWQsXHJcbiAgICAgIHNlbmRlcjoge1xyXG4gICAgICAgIGlkOiB1c2VyLnVpZCxcclxuICAgICAgfSxcclxuICAgICAgcmVjZWl2ZXI6IHtcclxuICAgICAgICBpZDogcmVjZWl2ZXJJZCxcclxuICAgICAgfSxcclxuICAgICAgc2VudEF0OiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcclxuICAgIH0pO1xyXG5cclxuICAgIGFkZFRvRGF0YUJhc2UoXCJyZWNvbW1lbmRhdGlvbnNcIiwgbWVzc2FnZUlkLCB7XHJcbiAgICAgIGNvbnRlbnQ6IGRvY3VtZW50LnBob3RvVVJMLFxyXG4gICAgICBtZXNzYWdlOiBgSGksIEkgd2FudCB0byByZWNvbW1lbmQgeW91IHRoZSBib29rICR7ZG9jdW1lbnQudGl0bGV9IHdyaXR0ZW4gYnkgJHtkb2N1bWVudC5hdXRob3J9LmAsXHJcbiAgICAgIGNoYXRJZDogY2hhdElkLFxyXG4gICAgICBtZXNzYWdlSWQsXHJcbiAgICAgIHNlbmRlcjoge1xyXG4gICAgICAgIGlkOiB1c2VyLnVpZCxcclxuICAgICAgfSxcclxuICAgICAgcmVjZWl2ZXI6IHtcclxuICAgICAgICBpZDogcmVjZWl2ZXJJZCxcclxuICAgICAgfSxcclxuICAgICAgc2VudEF0OiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcclxuICAgIH0pO1xyXG5kaXNwYXRjaChzbmFja2JhckFjdGlvbnMuc2hvd01lc3NhZ2Uoe21lc3NhZ2U6YCR7YWxlcnRNZXNzYWdlcy5ub3RpZmljYXRpb25zLnN1Y2Nlc3NmdWxsLnNlbmRbc2VsZWN0ZWRMYW5ndWFnZV19YCwgYWxlcnRUeXBlOlwic3VjY2Vzc1wifSkpO1xyXG4gICAgfVxyXG5cclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9e2BtaW4taC1zY3JlZW4gaC1mdWxsIG92ZXJmbG93LXgtaGlkZGVuYH0+XHJcbiAgICAgIHsvKiB7aXNPcGVuZWQgJiYgPEVkaXRCb29rIGlkPXtpZH0gLz59ICovfVxyXG5cclxuICAgICAge2RvY3VtZW50ICYmIChcclxuICAgICAgICA8PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IG1heC13LTd4bCBteC1hdXRvIG0tMCB3LWZ1bGxcIj5cclxuXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBnYXAtMlwiPlxyXG4gICAgICAgICAgICAgIDxwPntkb2N1bWVudC50aXRsZX08L3A+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC00IGl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uPiBcclxuICAgICAgICAgICAgICAgICAgICA8RmFIZWFydC8+XHJcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICB7bGlrZXJzICYmIDxwPntKU09OLnN0cmluZ2lmeShsaWtlcnMuZmlsdGVyKChpdGVtKT0+aXRlbS5sb3ZlZEJvb2tJZCA9PT0gaWQpWzBdKX08L3A+fVxyXG48L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvPlxyXG4gICAgICApfVxyXG4gICAgICB7ZG9jdW1lbnQgJiYgIHJlYWRlcnMgJiYgKFxyXG4gICAgICAgICA8PlxyXG4gICAgIFxyXG4gICAgICAgICAgICA8Lz5cclxuICAgICAgKX1cclxuXHJcbiAgICAgIHtib29rUmVhZGVyRm9ybSAmJiBkb2N1bWVudCAmJiB1c2VyICYmIChcclxuICAgICAgIDw+XHJcbiAgICAgXHJcbiAgICAgICAgICAgIDwvPlxyXG4gICAgICApfVxyXG5cclxuICAgICAge3VwZGF0ZVJlYWRlclN0YXR1cyAmJiBkb2N1bWVudCAmJiAoXHJcbiAgICAgPD5cclxuICAgICBcclxuICAgICAgICAgICAgPC8+XHJcbiAgICAgICl9XHJcblxyXG4gICAgICB7c2hvd0xpa2VycyAmJiAoXHJcbiAgICAgICAgPD5cclxuICAgICBcclxuICAgICAgICAgICAgPC8+XHJcbiAgICAgICl9XHJcbiAgICAgIHtpc1BlbmRpbmcgJiYgPExvYWRlciAvPn1cclxuXHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCb29rO1xyXG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJGYUhlYXJ0IiwidXNlRGlzcGF0Y2giLCJ1c2VTZWxlY3RvciIsInVuaXFpZCIsInVzZUNsaXBib2FyZCIsImFsZXJ0TWVzc2FnZXMiLCJMb2FkZXIiLCJzbmFja2JhckFjdGlvbnMiLCJ1c2VBdXRoQ29udGV4dCIsInVzZUdldERvY3VtZW50IiwidXNlR2V0RG9jdW1lbnRzIiwidXNlUmVhbERhdGFiYXNlIiwidXNlUmVhbHRpbWVEb2N1bWVudCIsInVzZVJlYWx0aW1lRG9jdW1lbnRzIiwidXNlUm91dGVyIiwiQm9vayIsInBhcmFtcyIsImJvb2tJZCIsImlkIiwiZGlzcGF0Y2giLCJuYXZpZ2F0ZSIsInVzZXIiLCJpc1BlbmRpbmciLCJzZXRJc1BlbmRpbmciLCJnZXREb2N1bWVudCIsImdldERvY3VtZW50cyIsImlzRGFya01vZGVkIiwic3RhdGUiLCJtb2RlIiwiaXNEYXJrTW9kZSIsInJlbW92ZUZyb21EYXRhQmFzZSIsImFkZFRvRGF0YUJhc2UiLCJ1cGRhdGVEYXRhYmFzZSIsImlzTGlrZWQiLCJzZXRJc0xpa2VkIiwiYm9va1JlYWRlckZvcm0iLCJzZXRCb29rUmVhZGVyRm9ybSIsInVwZGF0ZVJlYWRlclN0YXR1cyIsInNldFVwZGF0ZVJlYWRlclN0YXR1cyIsInNob3dMaWtlcnMiLCJzZXRTaG93TGlrZXJzIiwiZXhwYW5kZWQiLCJzZXRFeHBhbmRlZCIsImhhbmRsZU9wZW5BY2NvcmQiLCJwYW5lbCIsImV2ZW50IiwiaXNFeHBhbmRlZCIsInNob3dBbGxMaWtlcnMiLCJoaWRlQWxsTGlrZXJzIiwiZG9jdW1lbnRzIiwibGlrZXJzIiwicmVjZW5zaW9uT2JqZWN0cyIsInJlY2Vuc2lvbnMiLCJtYXAiLCJib29rUmVhZGVyIiwib2JqIiwidW5kZWZpbmVkIiwibmVzdGVkT2JqZWN0IiwiT2JqZWN0IiwidmFsdWVzIiwiZmxhdCIsInNob3dJZkxpa2VkIiwiZG9jRWxlbWVudCIsInVpZCIsImRvY3VtZW50IiwicmVhZGVyc09iamVjdHMiLCJyZWFkZXJzIiwicHVibGlzaFJlY2Vuc2lvbiIsInJlY2Vuc2lvbiIsImJvb2tSYXRlIiwidHJpbSIsImxlbmd0aCIsInNob3dNZXNzYWdlIiwibWVzc2FnZSIsIm5vdGlmaWNhdGlvbnMiLCJ3cm9uZyIsInJlY2Vuc2lvbkxvbmdlciIsInNlbGVjdGVkTGFuZ3VhZ2UiLCJhbGVydFR5cGUiLCJyZWNlbnNpb25lZEJvb2siLCJkaXNwbGF5TmFtZSIsImVtYWlsIiwicGhvdG9VUkwiLCJkYXRlT2ZGaW5pc2giLCJEYXRlIiwiZ2V0VGltZSIsInJlYWRlck9iamVjdCIsImZpbmQiLCJyZWFkZXIiLCJib29rUmVhZGluZ0lkIiwibWVtYmVyc09iamVjdHMiLCJjb21wZXRpdGlvbnNNZW1iZXJzIiwiY29tbXVuaXR5TWVtYmVyIiwidXNlcnMiLCJtZW1iZXIiLCJsYW5ndWFnZVNlbGVjdGlvbiIsInNlbGVjdGVkTGFuZ3VnYWdlIiwiZ2V0Q29tcGV0aXRpb25NZW1iZXJzIiwiY3VycmVudENvbXBldGl0aW9uIiwidXNlckNvbXBldGl0aW9ucyIsInBvcCIsInZpc2l0ZWRDb21wZXRpdGlvbnMiLCJpbmNsdWRlcyIsIm1lbWJlcnNJbkN1cnJlbnRDb21wZXRpdGlvbiIsImZpbHRlciIsImJlbG9uZ3NUbyIsInJlc3VsdCIsImNvbmNhdCIsIm5ld01lbWJlcnNDb21wZXRpdGlvbnMiLCJwdXNoIiwiZG9jIiwidmFsdWUiLCJpbmRleCIsInNlbGYiLCJmaW5kSW5kZXgiLCJtIiwiY2hhbmdlTG92ZVN0YXRlIiwibGlrZXJEb2MiLCJsb3ZlZEJvb2tJZCIsImxvdmVkQnkiLCJ0aGVuIiwiZGF0YSIsImxpa2VzQW1vdW50IiwiY2xpY2tEZWxldGUiLCJzdWNjZXNzZnVsbCIsInJlbW92ZSIsImlzT3BlbmVkIiwibW9kYWwiLCJjbGlwYm9hcmQiLCJjb3B5UGF0aE5hbWUiLCJjb3B5Iiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiY29waWVkIiwib3BlbkJvb2tSZWFkZXJGb3JtIiwib3BlblVwZGF0ZVJlYWRlckZvcm0iLCJjbG9zZUJvb2tSZWFkZXJGb3JtIiwiY2xvc2VVcGRhdGVSZWFkZXJGb3JtIiwicmVtb3ZlRnJvbVNoZWxmIiwiYWRkVG9TaGVsZiIsImhhc1N0YXJ0ZWQiLCJoYXNGaW5pc2hlZCIsInJlYWRQYWdlcyIsInBhZ2VzUmVhZCIsInN0YXJ0ZWRSZWFkaW5nIiwidXBkYXRlUmVhZGVyU3RhdGUiLCJwYWdlc051bWJlciIsInNob3dMaXN0Iiwic2V0U2hvd0xpc3QiLCJzaG93TGlzdHNPZlVzZXJzIiwiY2xvc2VMaXN0c09mVXNlcnMiLCJyZWNvbW1lbmRUb1VzZXIiLCJyZWNlaXZlcklkIiwiZmlyc3RQb3NzaWJpbGl0eSIsInNlY29uZFBvc3NpYmlsaXR5IiwiZXhpc3RpbmdDaGF0MSIsImV4aXN0aW5nQ2hhdDIiLCJjaGF0SWQiLCJtZXNzYWdlSWQiLCJjcmVhdGVkQXQiLCJlbnRpdGxlZFVzZXJJZCIsImVudGl0bGVkQ2hhdElkIiwiY29udGVudCIsInRpdGxlIiwiYXV0aG9yIiwic2VuZGVyIiwicmVjZWl2ZXIiLCJzZW50QXQiLCJzZW5kIiwiZGl2IiwiY2xhc3NOYW1lIiwicCIsImJ1dHRvbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJpdGVtIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/book/[bookId]/page.tsx\n"));

/***/ })

});